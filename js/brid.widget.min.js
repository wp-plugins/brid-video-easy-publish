/**
 * Brid Widget
 * Copyright (C) 2015 by Brid.tv
 * Do not change or modify code below
 * @author Brid.tv https://brid.tv
 * License: This software is not free to modify.
 */
var $BridWidget=function(i,t){this.conf={thumb:{width:80,height:80}},this.speed=700,this.bridWidget=jQuery(i),this.playerDiv=this.bridWidget.find(".brid"),this.playerId=this.playerDiv.attr("id"),this.playlist=this.bridWidget.find(".brid-pl"),this.BridWidgetPlaylist=this.bridWidget.find(".BridWidgetPlaylist"),this.left=this.bridWidget.find(".bridWidgetGoToLeft"),this.right=this.bridWidget.find(".bridWidgetGoToRight"),this.items=t.items,this.itemsLoaded=this.items,this.config=t,this.height=t.height;var d=t.height-this.conf.thumb.height;this.playerConfig={id:"264",width:"100%",height:d,playlist:{id:"0",mode:"latest",items:this.items},video_type:"0"},this.playerConfig.id=t.playerId,this.playerConfig.height=d,this.playlistUrl=t.playlist,this.bridWidget.css("height",parseInt(this.playerConfig.height)+90+"px"),this.plugin_url=t.plugin_url,this.noImage=t.plugin_url+t.noImage,this.playerConfig.video_type=t.playlistType,$bp(this.playerId,this.playerConfig),this.width=parseInt(this.bridWidget.width()),this.widthMinusArr=parseInt(this.width-40),this.thumbSize=this.conf.thumb.width+5,this.thumbNum=parseInt(this.widthMinusArr/this.thumbSize),this.offset=(this.widthMinusArr-this.thumbNum*this.conf.thumb.width)/this.thumbNum,this.playlist.css("width",this.widthMinusArr),this.BridWidgetPlaylistWidth=this.itemsLoaded*this.thumbSize,this.BridWidgetPlaylist.css("width",+this.BridWidgetPlaylistWidth+"px"),this.thumbClick=function(i){var t=parseInt(jQuery(this).attr("data-index"));$bp(i.data.playerId).playByIndex(t)},this.goLeft=function(i){var t=i.data,d=parseInt(t.BridWidgetPlaylist.css("left"));d||(d=0);var s=d+t.widthMinusArr;return s>0?!1:void t.BridWidgetPlaylist.animate({left:"+="+t.widthMinusArr},t.speed,function(){})},this.toHHMMSS=function(i){void 0==i&&(i=0),i=parseInt(i);var t=Math.floor(i/3600),d=Math.floor((i-3600*t)/60),s=i-3600*t-60*d;return 10>t&&(t="0"+t),10>d&&(d="0"+d),10>s&&(s="0"+s),("00"!=t?t+":":"")+d+":"+s},this.goRight=function(i){var t=i.data,d=t.BridWidgetPlaylist.css("left"),s=0;return s="auto"==d?0:parseInt(d),s-=t.width+10,Math.abs(s)>t.BridWidgetPlaylistWidth?!1:void t.BridWidgetPlaylist.animate({left:"-="+t.widthMinusArr},t.speed,function(){})},this.left.on("click",this,this.goLeft),this.right.on("click",this,this.goRight);var s=this;return this.loadPlaylist=function(){jQuery.ajax({url:s.playlistUrl}).done(function(i){if(i.Video.length>0){var t="";for(var d in i.Video){var e=i.Video[d];(""==e.image||null==e.image)&&(e.image=s.noImage),1==s.config.playlistType?0!=d&&(t+='<div class="bridWidgetThumb" title="'+e.name+'" data-index="'+d+'"><div class="brid-widget-black" style="width:80px;height:80px;"></div><img src="'+s.plugin_url+'img/small_play.png" onerror="'+s.plugin_url+'img/thumb_404.png" class="brid-widget-small-play"><div class="brid-widget-time">'+s.toHHMMSS(e.duration)+'</div><img class="snapshot" src="'+e.image+'" width="80px" height="80px"/></div>'):t+='<div class="bridWidgetThumb" title="'+e.name+'" data-index="'+d+'"><div class="brid-widget-black" style="width:80px;height:80px;"></div><img src="'+s.plugin_url+'img/small_play.png" onerror="'+s.plugin_url+'img/thumb_404.png" class="brid-widget-small-play"><div class="brid-widget-time">'+s.toHHMMSS(e.duration)+'</div><img class="snapshot" src="'+e.image+'" width="80px" height="80px"/></div>'}s.BridWidgetPlaylist.append(t)}else void 0!=i.Video.name&&(e=i.Video,s.BridWidgetPlaylist.append('<div class="bridWidgetThumb" title="'+e.name+'" data-index="'+d+'"><div class="brid-widget-black" style="width:80px;height:80px;"></div><img src="'+s.plugin_url+'img/small_play.png" onerror="'+s.plugin_url+'img/thumb_404.png" class="brid-widget-small-play"><div class="brid-widget-time">'+s.toHHMMSS(e.duration)+'</div><img class="snapshot" src="'+e.image+'" width="80px" height="80px"/></div>'));var h=Math.ceil(i.Video.length/s.thumbNum);s.BridWidgetPlaylistWidth=h*s.widthMinusArr,s.BridWidgetPlaylist.css("width",s.BridWidgetPlaylistWidth+"px"),s.BridWidgetPlaylist.find(".bridWidgetThumb").each(function(i,t){jQuery(t).css("margin-left",s.offset/2+"px").css("margin-right",s.offset/2+"px"),jQuery(t).on("click",s,s.thumbClick).hover(function(){jQuery(this).find(".brid-widget-black, .brid-widget-small-play").show()},function(){jQuery(this).find(".brid-widget-black, .brid-widget-small-play").hide()})})})},this.loadPlaylist(),this},$BridWidgets={widgets:[],init:function(i){var t=this.widgets;jQuery(".bridWidget").each(function(d,s){void 0==jQuery(s).attr("data-loaded")&&(jQuery(s).attr("data-loaded","true"),t.push(new $BridWidget(s,i)))})}};