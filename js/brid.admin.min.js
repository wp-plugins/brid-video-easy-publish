function findPos(e){var t=curtop=0;if(e.offsetParent)for(t=e.offsetLeft,curtop=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,curtop+=e.offsetTop;return[curtop,t]}function handleImportantError(e,t){if(null!=e){debug.error("error",e);var i='<br/>Please report this "bug" to <a href="mailto:brid.dev@brid.tv&subject=Bug+Report&body='+escape(t+e.message+e.stack)+'">Brid.tv Dev Team</a> and try to reload page.',r=[];r.push("<b>Message: </b>"+t),r.push("<b>Error Object Message:</b> "+e.message),r.push("<b>Error Object Stack: </b><p>"+e.stack.replace("\n","<br/>").replace(/at /g,"<br/>")+"</p>"),r.push("<b>What to do?: </b>"+i),debug.error("handleImportantError",e,t),jQuery("#content").html(r.join("<br/>"))}}function enableSave(e){return debug.log("Deprecated call: enableSave"),$Brid.Video.enableSave(e)}function checkFieldsEncodedFile(e){return debug.log("Deprecated call: checkFieldsEncodedFile"),$Brid.Video.checkFieldsEncodedFile(e)}function checkFields(e){return debug.log("Deprecated call: checkFields"),$Brid.Video.checkFields(e)}function isCategorySelected(){return debug.log("Deprecated call: isCategorySelected"),$Brid.Video.isCategorySelected()}function initButtonOpacity(){$Brid.init(["Html.Button"])}function killVeeps(){debug.log("Kill veeps");try{jQuery(".veeps").hide(),jQuery(".veeps-holder").hide(),Veeps.destory()}catch(e){}}function initBridMain(){debug.log("initBridMain"),$Brid.init(["Html.DefaultInput","Html.GoogleCheckbox","Html.CheckboxElement","Html.Selectbox","Html.Button","Html.Radio","dropdown","datepicker"]),$Brid.Html.Effect.lazyload()}(function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,r,s,o,n;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),o=e.childNodes,n=[],r=0,s=o.length;s>r;r++)i=o[r],n.push(this.add_option(i,t,e.disabled));return n},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),e.select_to_array=function(t){var i,r,s,o,n;for(r=new e,n=t.childNodes,s=0,o=n.length;o>s;s++)i=n[s],r.add_node(i);return r.parsed},this.SelectParser=e}).call(this),function(){var e,t;t=this,e=function(){function e(e,t){this.form_field=e,this.options=null!=t?t:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.max_selected_options=this.options.max_selected_options||1/0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;return this.active_field?void 0:setTimeout(function(){return e.container_mousedown()},50)},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.result_add_option=function(e){var t,i;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=""!==e.style.cssText?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+i+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.results_reset(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,i;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=Math.floor(Math.random()*e.length),t=e.substring(i,i+1)},e}(),t.AbstractChosen=e}.call(this),function(){var e,t,i,r,s=Object.prototype.hasOwnProperty,o=function(e,t){function i(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};r=this,e=jQuery,e.fn.extend({chosen:function(i){return this.each(function(){var r;return r=e(this),r.hasClass("chzn-done")?void 0:r.data("chosen",new t(this,i))})}}),t=function(t){function s(){s.__super__.constructor.apply(this,arguments)}return o(s,t),s.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},s.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},s.prototype.set_up_html=function(){var t,r,s,o;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth();var n=100==this.f_width?"100%":this.f_width+"px";return t=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+n+";"}),t.html(this.is_multiple?'<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>':'<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(t),this.container=e("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),r=this.container.height(),s=100==this.f_width?"100%":this.f_width-i(this.dropdown)+"px",this.dropdown.css({width:s,top:r+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),o=this.dropdown.width()-i(this.search_container)-i(this.search_field),this.search_field.css({width:o+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},s.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){return e.container_mousedown(t)}),this.container.mouseup(function(t){return e.container_mouseup(t)}),this.container.mouseenter(function(t){return e.mouse_enter(t)}),this.container.mouseleave(function(t){return e.mouse_leave(t)}),this.search_results.mouseup(function(t){return e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){return e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){return e.search_results_mouseout(t)}),this.form_field_jq.bind("liszt:updated",function(t){return e.results_update_field(t)}),this.search_field.blur(function(t){return e.input_blur(t)}),this.search_field.keyup(function(t){return e.keyup_checker(t)}),this.search_field.keydown(function(t){return e.keydown_checker(t)}),this.is_multiple?(this.search_choices.click(function(t){return e.choices_click(t)}),this.search_field.focus(function(t){return e.input_focus(t)})):this.container.click(function(e){return e.preventDefault()})},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},s.prototype.container_mousedown=function(t){var i;return this.is_disabled?void 0:(i=null!=t?e(t.target).hasClass("search-choice-close"):!1,t&&"mousedown"===t.type&&!this.results_showing&&t.stopPropagation(),this.pending_destroy_click||i?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chzn-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field()))},s.prototype.container_mouseup=function(e){return"ABBR"===e.target.nodeName?this.results_reset(e):void 0},s.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){var e,t,i,s,o;for(this.parsing=!0,this.results_data=r.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",o=this.results_data,i=0,s=o.length;s>i;i++)t=o[i],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},s.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},s.prototype.result_do_highlight=function(e){var t,i,r,s,o;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),s=r+o,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=s)return this.search_results.scrollTop(t-r>0?t-r:0);if(o>i)return this.search_results.scrollTop(i)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){var e;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return e=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},s.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},s.prototype.set_tab_index=function(){var e;return this.form_field_jq.attr("tabindex")?(e=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",e):(this.selected_item.attr("tabindex",e),this.search_field.attr("tabindex",-1))):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t)):void 0},s.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},s.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choices_click=function(t){return t.preventDefault(),!this.active_field||e(t.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},s.prototype.choice_build=function(t){var i,r,s=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(i=this.container_id+"_c_"+t.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+i+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>'),r=e("#"+i).find("a").first(),r.click(function(e){return s.choice_destroy_link_click(e)}))},s.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.target)))},s.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(e.attr("rel")),e.parents("li").first().remove()},s.prototype.results_reset=function(){return this.form_field.options[this.form_field.selectedIndex].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.selected_item.find("abbr").remove(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.result_select=function(e){var t,i,r,s;return this.result_highlight?(t=this.result_highlight,i=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),s=i.substr(i.lastIndexOf("_")+1),r=this.results_data[s],r.selected=!0,this.form_field.options[r.options_index].selected=!0,this.is_multiple?this.choice_build(r):(this.selected_item.find("span").first().text(r.text),this.allow_single_deselect&&this.single_deselect_control_build()),e.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change",{selected:this.form_field.options[r.options_index].value}),this.search_field_scale()):void 0},s.prototype.result_activate=function(e){return e.addClass("active-result")},s.prototype.result_deactivate=function(e){return e.removeClass("active-result")},s.prototype.result_deselect=function(t){var i,r;return r=this.results_data[t],r.selected=!1,this.form_field.options[r.options_index].selected=!1,i=e("#"+this.container_id+"_o_"+t),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[r.options_index].value}),this.search_field_scale()},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},s.prototype.winnow_results=function(){var t,i,r,s,o,n,a,l,d,c,u,h,p,f,g,m,v,b;for(this.no_results_clear(),d=0,c=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),n=this.search_contains?"":"^",o=new RegExp(n+c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=new RegExp(c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),b=this.results_data,f=0,m=b.length;m>f;f++)if(i=b[f],!i.disabled&&!i.empty)if(i.group)e("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(t=!1,l=i.dom_id,a=e("#"+l),o.test(i.html))t=!0,d+=1;else if((i.html.indexOf(" ")>=0||0===i.html.indexOf("["))&&(s=i.html.replace(/\[|\]/g,"").split(" "),s.length))for(g=0,v=s.length;v>g;g++)r=s[g],o.test(r)&&(t=!0,d+=1);t?(c.length?(u=i.html.search(p),h=i.html.substr(0,u+c.length)+"</em>"+i.html.substr(u+c.length),h=h.substr(0,u)+"<em>"+h.substr(u)):h=i.html,a.html(h),this.result_activate(a),null!=i.group_array_index&&e("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return 1>d&&c.length?this.no_results(c):this.winnow_results_set_highlight()},s.prototype.winnow_results_clear=function(){var t,i,r,s,o;for(this.search_field.val(""),i=this.search_results.find("li"),o=[],r=0,s=i.length;s>r;r++)t=i[r],t=e(t),o.push(t.hasClass("group-result")?t.css("display","auto"):this.is_multiple&&t.hasClass("result-selected")?void 0:this.result_activate(t));return o},s.prototype.winnow_results_set_highlight=function(){var e,t;return this.result_highlight||(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null==e)?void 0:this.result_do_highlight(e)},s.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i)},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t))),this.results_showing?void 0:this.results_show()},s.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},s.prototype.search_field_scale=function(){var t,i,r,s,o,n,a,l,d;if(this.is_multiple){for(r=0,a=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",n=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,d=n.length;d>l;l++)s=n[l],o+=s+":"+this.search_field.css(s)+";";return i=e("<div />",{style:o}),i.text(this.search_field.val()),e("body").append(i),a=i.width()+25,i.remove(),a>this.f_width-10&&(a=this.f_width-10),this.search_field.css({width:a+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},s.prototype.generate_random_id=function(){var t;for(t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();e("#"+t).length>0;)t+=this.generate_random_char();return t},s}(AbstractChosen),i=function(e){var t;return t=e.outerWidth()-e.width()},r.get_side_border_padding=i}.call(this),function(e,t,i){function r(i,r,s){var o=t.createElement(i);return r&&(o.id=X+r),s&&(o.style.cssText=s),e(o)}function s(){return i.innerHeight?i.innerHeight:e(i).height()}function o(t,i){i!==Object(i)&&(i={}),this.cache={},this.el=t,this.value=function(t){var r;return void 0===this.cache[t]&&(r=e(this.el).attr("data-cbox-"+t),void 0!==r?this.cache[t]=r:void 0!==i[t]?this.cache[t]=i[t]:void 0!==K[t]&&(this.cache[t]=K[t])),this.cache[t]},this.get=function(t){var i=this.value(t);return e.isFunction(i)?i.call(this.el,this):i}}function n(e){var t=Q.length,i=(R+e)%t;return 0>i?t+i:i}function a(e,t){return Math.round((/%/.test(e)?("x"===t?S.width():s())/100:1)*parseInt(e,10))}function l(e,t){return e.get("photo")||e.get("photoRegex").test(t)}function d(e,t){return e.get("retinaUrl")&&i.devicePixelRatio>1?t.replace(e.get("photoRegex"),e.get("retinaSuffix")):t}function c(e){"contains"in y[0]&&!y[0].contains(e.target)&&e.target!==b[0]&&(e.stopPropagation(),y.focus())}function u(e){u.str!==e&&(y.add(b).removeClass(u.str).addClass(e),u.str=e)}function h(t){R=0,t&&t!==!1&&"nofollow"!==t?(Q=e("."+et).filter(function(){var i=e.data(this,Z),r=new o(this,i);return r.get("rel")===t}),R=Q.index(M.el),-1===R&&(Q=Q.add(M.el),R=Q.length-1)):Q=e(M.el)}function p(i){e(t).trigger(i),at.triggerHandler(i)}function f(i){var s;if(!q){if(s=e(i).data(Z),M=new o(i,s),h(M.get("rel")),!z){z=G=!0,u(M.get("className")),y.css({visibility:"hidden",display:"block",opacity:""}),B=r(lt,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),_.css({width:"",height:""}).append(B),N=k.height()+C.height()+_.outerHeight(!0)-_.height(),D=j.width()+w.width()+_.outerWidth(!0)-_.width(),V=B.outerHeight(!0),O=B.outerWidth(!0);var n=a(M.get("initialWidth"),"x"),l=a(M.get("initialHeight"),"y"),d=M.get("maxWidth"),f=M.get("maxHeight");M.w=(d!==!1?Math.min(n,a(d,"x")):n)-O-D,M.h=(f!==!1?Math.min(l,a(f,"y")):l)-V-N,B.css({width:"",height:M.h}),J.position(),p(tt),M.get("onOpen"),F.add(I).hide(),y.focus(),M.get("trapFocus")&&t.addEventListener&&(t.addEventListener("focus",c,!0),at.one(ot,function(){t.removeEventListener("focus",c,!0)})),M.get("returnFocus")&&at.one(ot,function(){e(M.el).focus()})}var g=parseFloat(M.get("opacity"));b.css({opacity:g===g?g:"",cursor:M.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),M.get("closeButton")?U.html(M.get("close")).appendTo(_):U.appendTo("<div/>"),v()}}function g(){y||(Y=!1,S=e(i),y=r(lt).attr({id:Z,"class":e.support.opacity===!1?X+"IE":"",role:"dialog",tabindex:"-1"}).hide(),b=r(lt,"Overlay").hide(),E=e([r(lt,"LoadingOverlay")[0],r(lt,"LoadingGraphic")[0]]),x=r(lt,"Wrapper"),_=r(lt,"Content").append(I=r(lt,"Title"),T=r(lt,"Current"),A=e('<button type="button"/>').attr({id:X+"Previous"}),H=e('<button type="button"/>').attr({id:X+"Next"}),P=r("button","Slideshow"),E),U=e('<button type="button"/>').attr({id:X+"Close"}),x.append(r(lt).append(r(lt,"TopLeft"),k=r(lt,"TopCenter"),r(lt,"TopRight")),r(lt,!1,"clear:left").append(j=r(lt,"MiddleLeft"),_,w=r(lt,"MiddleRight")),r(lt,!1,"clear:left").append(r(lt,"BottomLeft"),C=r(lt,"BottomCenter"),r(lt,"BottomRight"))).find("div div").css({"float":"left"}),$=r(lt,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),F=H.add(A).add(T).add(P)),t.body&&!y.parent().length&&e(t.body).append(b,y.append(x,$))}function m(){function i(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),f(this))}return y?(Y||(Y=!0,H.click(function(){J.next()}),A.click(function(){J.prev()}),U.click(function(){J.close()}),b.click(function(){M.get("overlayClose")&&J.close()}),e(t).bind("keydown."+X,function(e){var t=e.keyCode;z&&M.get("escKey")&&27===t&&(e.preventDefault(),J.close()),z&&M.get("arrowKey")&&Q[1]&&!e.altKey&&(37===t?(e.preventDefault(),A.click()):39===t&&(e.preventDefault(),H.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+X,"."+et,i):e("."+et).live("click."+X,i)),!0):!1}function v(){var t,s,o,n=J.prep,c=++dt;if(G=!0,L=!1,p(nt),p(it),M.get("onLoad"),M.h=M.get("height")?a(M.get("height"),"y")-V-N:M.get("innerHeight")&&a(M.get("innerHeight"),"y"),M.w=M.get("width")?a(M.get("width"),"x")-O-D:M.get("innerWidth")&&a(M.get("innerWidth"),"x"),M.mw=M.w,M.mh=M.h,M.get("maxWidth")&&(M.mw=a(M.get("maxWidth"),"x")-O-D,M.mw=M.w&&M.w<M.mw?M.w:M.mw),M.get("maxHeight")&&(M.mh=a(M.get("maxHeight"),"y")-V-N,M.mh=M.h&&M.h<M.mh?M.h:M.mh),t=M.get("href"),W=setTimeout(function(){E.show()},100),M.get("inline")){var u=e(t);o=e("<div>").hide().insertBefore(u),at.one(nt,function(){o.replaceWith(u)}),n(u)}else M.get("iframe")?n(" "):M.get("html")?n(M.get("html")):l(M,t)?(t=d(M,t),L=M.get("createImg"),e(L).addClass(X+"Photo").bind("error",function(){n(r(lt,"Error").html(M.get("imgError")))}).one("load",function(){c===dt&&setTimeout(function(){var e;M.get("retinaImage")&&i.devicePixelRatio>1&&(L.height=L.height/i.devicePixelRatio,L.width=L.width/i.devicePixelRatio),M.get("scalePhotos")&&(s=function(){L.height-=L.height*e,L.width-=L.width*e},M.mw&&L.width>M.mw&&(e=(L.width-M.mw)/L.width,s()),M.mh&&L.height>M.mh&&(e=(L.height-M.mh)/L.height,s())),M.h&&(L.style.marginTop=Math.max(M.mh-L.height,0)/2+"px"),Q[1]&&(M.get("loop")||Q[R+1])&&(L.style.cursor="pointer",L.onclick=function(){J.next()}),L.style.width=L.width+"px",L.style.height=L.height+"px",n(L)},1)}),L.src=t):t&&$.load(t,M.get("data"),function(t,i){c===dt&&n("error"===i?r(lt,"Error").html(M.get("xhrError")):e(this).contents())})}var b,y,x,_,k,j,w,C,Q,S,B,$,E,I,T,P,H,A,U,F,M,N,D,V,O,R,L,z,G,q,W,J,Y,K={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!0,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return e(this).attr("href")},title:function(){return this.title},createImg:function(){var t=new Image,i=e(this).data("cbox-img-attrs");return"object"==typeof i&&e.each(i,function(e,i){t[e]=i}),t},createIframe:function(){var i=t.createElement("iframe"),r=e(this).data("cbox-iframe-attrs");return"object"==typeof r&&e.each(r,function(e,t){i[e]=t}),"frameBorder"in i&&(i.frameBorder=0),"allowTransparency"in i&&(i.allowTransparency="true"),i.name=(new Date).getTime(),i.allowFullScreen=!0,i}},Z="colorbox",X="cbox",et=X+"Element",tt=X+"_open",it=X+"_load",rt=X+"_complete",st=X+"_cleanup",ot=X+"_closed",nt=X+"_purge",at=e("<a/>"),lt="div",dt=0,ct={},ut=function(){function e(){clearTimeout(n)}function t(){(M.get("loop")||Q[R+1])&&(e(),n=setTimeout(J.next,M.get("slideshowSpeed")))}function i(){P.html(M.get("slideshowStop")).unbind(l).one(l,r),at.bind(rt,t).bind(it,e),y.removeClass(a+"off").addClass(a+"on")}function r(){e(),at.unbind(rt,t).unbind(it,e),P.html(M.get("slideshowStart")).unbind(l).one(l,function(){J.next(),i()}),y.removeClass(a+"on").addClass(a+"off")}function s(){o=!1,P.hide(),e(),at.unbind(rt,t).unbind(it,e),y.removeClass(a+"off "+a+"on")}var o,n,a=X+"Slideshow_",l="click."+X;return function(){o?M.get("slideshow")||(at.unbind(st,s),s()):M.get("slideshow")&&Q[1]&&(o=!0,at.one(st,s),M.get("slideshowAuto")?i():r(),P.show())}}();e[Z]||(e(g),J=e.fn[Z]=e[Z]=function(t,i){var r,s=this;return t=t||{},e.isFunction(s)&&(s=e("<a/>"),t.open=!0),s[0]?(g(),m()&&(i&&(t.onComplete=i),s.each(function(){var i=e.data(this,Z)||{};e.data(this,Z,e.extend(i,t))}).addClass(et),r=new o(s[0],t),r.get("open")&&f(s[0])),s):s},J.position=function(t,i){function r(){k[0].style.width=C[0].style.width=_[0].style.width=parseInt(y[0].style.width,10)-D+"px",_[0].style.height=j[0].style.height=w[0].style.height=parseInt(y[0].style.height,10)-N+"px"
}var o,n,l,d=0,c=0,u=y.offset();if(S.unbind("resize."+X),y.css({top:-9e4,left:-9e4}),n=S.scrollTop(),l=S.scrollLeft(),M.get("fixed")?(u.top-=n,u.left-=l,y.css({position:"fixed"})):(d=n,c=l,y.css({position:"absolute"})),c+=M.get("right")!==!1?Math.max(S.width()-M.w-O-D-a(M.get("right"),"x"),0):M.get("left")!==!1?a(M.get("left"),"x"):Math.round(Math.max(S.width()-M.w-O-D,0)/2),d+=M.get("bottom")!==!1?Math.max(s()-M.h-V-N-a(M.get("bottom"),"y"),0):M.get("top")!==!1?a(M.get("top"),"y"):Math.round(Math.max(s()-M.h-V-N,0)/2),y.css({top:u.top,left:u.left,visibility:"visible"}),x[0].style.width=x[0].style.height="9999px",o={width:M.w+O+D,height:M.h+V+N,top:d,left:c},t){var h=0;e.each(o,function(e){return o[e]!==ct[e]?void(h=t):void 0}),t=h}ct=o,t||y.css(o),y.dequeue().animate(o,{duration:t||0,complete:function(){r(),G=!1,x[0].style.width=M.w+O+D+"px",x[0].style.height=M.h+V+N+"px",M.get("reposition")&&setTimeout(function(){S.bind("resize."+X,J.position)},1),e.isFunction(i)&&i()},step:r})},J.resize=function(e){var t;z&&(e=e||{},e.width&&(M.w=a(e.width,"x")-O-D),e.innerWidth&&(M.w=a(e.innerWidth,"x")),B.css({width:M.w}),e.height&&(M.h=a(e.height,"y")-V-N),e.innerHeight&&(M.h=a(e.innerHeight,"y")),e.innerHeight||e.height||(t=B.scrollTop(),B.css({height:"auto"}),M.h=B.height()),B.css({height:M.h}),t&&B.scrollTop(t),J.position("none"===M.get("transition")?0:M.get("speed")))},J.prep=function(i){function s(){return M.w=M.w||B.width(),M.w=M.mw&&M.mw<M.w?M.mw:M.w,M.w}function a(){return M.h=M.h||B.height(),M.h=M.mh&&M.mh<M.h?M.mh:M.h,M.h}if(z){var c,h="none"===M.get("transition")?0:M.get("speed");B.remove(),B=r(lt,"LoadedContent").append(i),B.hide().appendTo($.show()).css({width:s(),overflow:M.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(_),$.hide(),e(L).css({"float":"none"}),u(M.get("className")),c=function(){function i(){e.support.opacity===!1&&y[0].style.removeAttribute("filter")}var r,s,a=Q.length;z&&(s=function(){clearTimeout(W),E.hide(),p(rt),M.get("onComplete")},I.html(M.get("title")).show(),B.show(),a>1?("string"==typeof M.get("current")&&T.html(M.get("current").replace("{current}",R+1).replace("{total}",a)).show(),H[M.get("loop")||a-1>R?"show":"hide"]().html(M.get("next")),A[M.get("loop")||R?"show":"hide"]().html(M.get("previous")),ut(),M.get("preloading")&&e.each([n(-1),n(1)],function(){var i,r=Q[this],s=new o(r,e.data(r,Z)),n=s.get("href");n&&l(s,n)&&(n=d(s,n),i=t.createElement("img"),i.src=n)})):F.hide(),M.get("iframe")?(r=M.get("createIframe"),M.get("scrolling")||(r.scrolling="no"),e(r).attr({src:M.get("href"),"class":X+"Iframe"}).one("load",s).appendTo(B),at.one(nt,function(){r.src="//about:blank"}),M.get("fastIframe")&&e(r).trigger("load")):s(),"fade"===M.get("transition")?y.fadeTo(h,1,i):i())},"fade"===M.get("transition")?y.fadeTo(h,0,function(){J.position(0,c)}):J.position(h,c)}},J.next=function(){!G&&Q[1]&&(M.get("loop")||Q[R+1])&&(R=n(1),f(Q[R]))},J.prev=function(){!G&&Q[1]&&(M.get("loop")||R)&&(R=n(-1),f(Q[R]))},J.close=function(){z&&!q&&(q=!0,z=!1,p(st),M.get("onCleanup"),S.unbind("."+X),b.fadeTo(M.get("fadeOut")||0,0),y.stop().fadeTo(M.get("fadeOut")||0,0,function(){y.hide(),b.hide(),p(nt),B.remove(),setTimeout(function(){q=!1,p(ot),M.get("onClosed")},1)}))},J.remove=function(){y&&(y.stop(),e[Z].close(),y.stop(!1,!0).remove(),b.remove(),q=!1,y=null,e("."+et).removeData(Z).removeClass(et),e(t).unbind("click."+X).unbind("keydown."+X))},J.element=function(){return e(M.el)},J.settings=K)}(jQuery,document,window),function(e){var t={init:function(t){return debug.log("INIT thumbnailScroller"),this.each(function(){function i(){dragInProgress&&e("#sortable").sortable("refresh")}function r(){if(Q>=m)w=Math.round((Q-m)/Q*(x+n.acceleration));else{if(!(m>=o.width()-Q||b))return;w=Math.round(-(m-(o.width()-Q))/Q*(x+n.acceleration))}e(".ui-sortable-helper").add(l).stop(!0,!0);var t=l.position().left;return w>0&&0==t?(i(),!1):0>w&&t==C?(i(),!1):(t+w>0&&(w=-t),C>t+w&&(w=C-t),t+w==C?(i(),!1):C==t?(i(),!1):(e(".ui-sortable-helper").animate({left:"-="+w},x,"linear",function(){i()}),void l.animate({left:"+="+w},x,"linear",function(){i()})))}function s(){c.hide(),d.show(),d.click(function(t){t.preventDefault();{var i=l.position().left,r=p+(i-o.width()),s=l.position().top;f+(s-o.height())}c.stop().show("fast"),"horizontal"==n.scrollerOrientation&&(r>=o.width()?l.stop().animate({left:"-="+o.width()},n.scrollSpeed,n.scrollEasing,function(){if(r==o.width()&&d.stop().hide("fast"),dragInProgress){var t=parseInt(e(".ui-sortable-helper").css("left"));e(".ui-sortable-helper").css("left",t+o.width()),e("#sortable").sortable("refresh")}}):(d.stop().hide("fast"),l.stop().animate({left:o.width()-p},n.scrollSpeed,n.scrollEasing,function(){if(dragInProgress){var t=parseInt(e(".ui-sortable-helper").css("left"));e(".ui-sortable-helper").css("left",t+r),e("#sortable").sortable("refresh")}})))}),c.click(function(e){e.preventDefault();{var t=l.position().left,i=(p+(t-o.width()),l.position().top);f+(i-o.height())}d.stop().show("fast"),"horizontal"==n.scrollerOrientation&&(t+o.width()<=0?l.stop().animate({left:"+="+o.width()},n.scrollSpeed,n.scrollEasing,function(){t+o.width()==0&&c.stop().hide("fast")}):(c.stop().hide("fast"),l.stop().animate({left:0},n.scrollSpeed,n.scrollEasing)))})}{var o=e(this),n=o.data("thumbnailScroller"),a=o.children(".jTscrollerContainer"),l=o.children(".jTscrollerContainer").children(".jTscroller"),d=o.parent().children(".jTscrollerNextButton"),c=o.parent().children(".jTscrollerPrevButton"),u=o.parent().children(".jNextTrigger");o.parent().children(".jPrevTrigger")}if("undefined"==typeof n){var h={scrollerType:"hoverPrecise",scrollerOrientation:"horizontal",scrollEasing:"easeOutCirc",scrollEasingAmount:800,acceleration:2,scrollSpeed:600,noScrollCenterSpace:0,autoScrolling:0,autoScrollingSpeed:8e3,autoScrollingEasing:"easeInOutQuad",autoScrollingDelay:2500};n=e.extend(h,t),o.data("thumbnailScroller",n)}else n=e.extend(n,t);if("horizontal"==n.scrollerOrientation){a.css("width","999999px");var p=l.outerWidth(!0)+a.innerWidth()-a.width();a.css("width",p)}else var p=l.outerWidth(!0);var f=l.outerHeight(!0);if(p>o.width()||f>o.height()){var g,m,v,b;if(u.hover(function(){b=!0},function(){b=!1}),"hoverAccelerate"==n.scrollerType){var y,x=8,_=function(e){g=findPos(this),m=e.pageX-g[1],v=e.pageY-g[0]},k=function(){o.unbind("mousemove.Thumbnail"),o.bind("mousemove.Thumbnail",_),clearInterval(y),y=setInterval(r,x)},j=function(){clearInterval(y),l.stop()};o.unbind("mouseenter.Thumbnail mouseleave.Thumbnail"),o.bind("mouseenter.Thumbnail",k),o.bind("mouseleave.Thumbnail",j),c.add(d).hide()}else"clickButtons"==n.scrollerType&&s()}else c.add(d).hide();var w,C=o.width()-p,Q=o.width()/2-n.noScrollCenterSpace})},destroy:function(){return e(this).each(function(){debug.log("destroy thumbnailScroller");var t=e(this);t.removeData("thumbnailScroller");var i=t.children(".jTscrollerContainer").children(".jTscroller"),r=t.parent().children(".jTscrollerNextButton"),s=t.parent().children(".jTscrollerPrevButton");i.stop(),r.stop(),s.stop(),r.unbind("click.Thumbnail"),s.unbind("click.Thumbnail"),t.unbind("mousemove.Thumbnail"),t.unbind("hover.Thumbnail")})}};e.fn.thumbnailScroller=function(){var i=arguments[0];if(t[i])i=t[i],arguments=Array.prototype.slice.call(arguments,1);else{if("object"!=typeof i&&i)return e.error("Method "+i+" does not exist on jQuery.thumbnailScroller"),this;i=t.init}return i.apply(this,arguments)}}(jQuery);var Handlebars={};!function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var i=Object.prototype.toString,r="[object Function]",s="[object Object]";e.registerHelper=function(t,r,o){if(i.call(t)===s){if(o||r)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else o&&(r.not=o),this.helpers[t]=r},e.registerPartial=function(t,r){i.call(t)===s?e.Utils.extend(this.partials,t):this.partials[t]=r},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,s){var o=s.inverse||function(){},n=s.fn,a=i.call(t);return a===r&&(t=t.call(this)),t===!0?n(this):t===!1||null==t?o(this):"[object Array]"===a?t.length>0?e.helpers.each(t,s):o(this):n(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var i=new e.K;return e.K.prototype=null,i},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,i){if(e.logger.level<=t){var r=e.logger.methodMap[t];"undefined"!=typeof console&&console[r]&&console[r].call(console,i)}}},e.log=function(t,i){e.logger.log(t,i)},e.registerHelper("each",function(t,s){var o,n=s.fn,a=s.inverse,l=0,d="",c=i.call(t);if(c===r&&(t=t.call(this)),s.data&&(o=e.createFrame(s.data)),t&&"object"==typeof t)if(t instanceof Array)for(var u=t.length;u>l;l++)o&&(o.index=l),d+=n(t[l],{data:o});else for(var h in t)t.hasOwnProperty(h)&&(o&&(o.key=h),d+=n(t[h],{data:o}),l++);return 0===l&&(d=a(this)),d}),e.registerHelper("if",function(t,s){var o=i.call(t);return o===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?s.inverse(this):s.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn})}),e.registerHelper("with",function(t,s){var o=i.call(t);return o===r&&(t=t.call(this)),e.Utils.isEmpty(t)?void 0:s.fn(t)}),e.registerHelper("log",function(t,i){var r=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(r,t)});var o=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(e,t,i,r,s,o){var n=o.length-1;switch(s){case 1:return o[n-1];case 2:this.$=new r.ProgramNode([],o[n]);break;case 3:this.$=new r.ProgramNode(o[n-2],o[n]);break;case 4:this.$=new r.ProgramNode(o[n-1],[]);break;case 5:this.$=new r.ProgramNode(o[n]);break;case 6:this.$=new r.ProgramNode([],[]);break;case 7:this.$=new r.ProgramNode([]);break;case 8:this.$=[o[n]];break;case 9:o[n-1].push(o[n]),this.$=o[n-1];break;case 10:this.$=new r.BlockNode(o[n-2],o[n-1].inverse,o[n-1],o[n]);break;case 11:this.$=new r.BlockNode(o[n-2],o[n-1],o[n-1].inverse,o[n]);break;case 12:this.$=o[n];break;case 13:this.$=o[n];break;case 14:this.$=new r.ContentNode(o[n]);break;case 15:this.$=new r.CommentNode(o[n]);break;case 16:this.$=new r.MustacheNode(o[n-1][0],o[n-1][1]);break;case 17:this.$=new r.MustacheNode(o[n-1][0],o[n-1][1]);break;case 18:this.$=o[n-1];break;case 19:this.$=new r.MustacheNode(o[n-1][0],o[n-1][1],"&"===o[n-2][2]);break;case 20:this.$=new r.MustacheNode(o[n-1][0],o[n-1][1],!0);break;case 21:this.$=new r.PartialNode(o[n-1]);break;case 22:this.$=new r.PartialNode(o[n-2],o[n-1]);break;case 23:break;case 24:this.$=[[o[n-2]].concat(o[n-1]),o[n]];break;case 25:this.$=[[o[n-1]].concat(o[n]),null];break;case 26:this.$=[[o[n-1]],o[n]];break;case 27:this.$=[[o[n]],null];break;case 28:this.$=[[o[n]],null];break;case 29:o[n-1].push(o[n]),this.$=o[n-1];break;case 30:this.$=[o[n]];break;case 31:this.$=o[n];break;case 32:this.$=new r.StringNode(o[n]);break;case 33:this.$=new r.IntegerNode(o[n]);break;case 34:this.$=new r.BooleanNode(o[n]);break;case 35:this.$=o[n];break;case 36:this.$=new r.HashNode(o[n]);break;case 37:o[n-1].push(o[n]),this.$=o[n-1];break;case 38:this.$=[o[n]];break;case 39:this.$=[o[n-2],o[n]];break;case 40:this.$=[o[n-2],new r.StringNode(o[n])];break;case 41:this.$=[o[n-2],new r.IntegerNode(o[n])];break;case 42:this.$=[o[n-2],new r.BooleanNode(o[n])];break;case 43:this.$=[o[n-2],o[n]];break;case 44:this.$=new r.PartialNameNode(o[n]);break;case 45:this.$=new r.PartialNameNode(new r.StringNode(o[n]));break;case 46:this.$=new r.PartialNameNode(new r.IntegerNode(o[n]));break;case 47:this.$=new r.DataNode(o[n]);break;case 48:this.$=new r.IdNode(o[n]);break;case 49:o[n-2].push({part:o[n],separator:o[n-1]}),this.$=o[n-2];break;case 50:this.$=[{part:o[n]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,r=[0],s=[null],o=[],n=this.table,a="",l=0,d=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;o.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,b,y,x,_,k={};;){if(g=r[r.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||"undefined"==typeof p)&&(p=t()),m=n[g]&&n[g][p]),"undefined"==typeof m||!m.length||!m[0]){var j="";if(!c){_=[];for(b in n[g])this.terminals_[b]&&b>2&&_.push("'"+this.terminals_[b]+"'");j=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(j,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:_})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:r.push(p),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(m[1]),p=null,f?(p=f,f=null):(d=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[m[1]][1],k.$=s[s.length-y],k._$={first_line:o[o.length-(y||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(y||1)].first_column,last_column:o[o.length-1].last_column},h&&(k._$.range=[o[o.length-(y||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(k,a,d,l,this.yy,m[1],s,o),"undefined"!=typeof v)return v;y&&(r=r.slice(0,-1*y*2),s=s.slice(0,-1*y),o=o.slice(0,-1*y)),r.push(this.productions_[m[1]][0]),s.push(k.$),o.push(k._$),x=n[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===r.length?this.yylloc.first_column:0)+r[r.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,r,s;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),n=0;n<o.length&&(i=this._input.match(this.rules[o[n]]),!i||t&&!(i[0].length>t[0].length)||(t=i,r=n,this.options.flex));n++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i,r){switch(i){case 0:return t.yytext="\\",14;case 1:if("\\"!==t.yytext.slice(-1)&&this.begin("mu"),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1),this.begin("emu")),t.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1)),14;case 4:return t.yytext=t.yytext.substr(0,t.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return t.yytext=t.yytext.substr(3,t.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\"/g,'"'),31;case 23:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return t.yytext=t.yytext.substr(1,t.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},e}();return t.lexer=i,e.prototype=t,t.Parser=e,new e}();e.Parser=o,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},e.AST={},e.AST.ProgramNode=function(t,i){this.type="program",this.statements=t,i&&(this.inverse=new e.AST.ProgramNode(i))},e.AST.MustacheNode=function(e,t,i){this.type="mustache",this.escaped=!i,this.hash=t;var r=this.id=e[0],s=this.params=e.slice(1),o=this.eligibleHelper=r.isSimple;this.isHelper=o&&(s.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,i,r,s){var o=function(t,i){if(t.original!==i.original)throw new e.Exception(t.original+" doesn't match "+i.original)};o(t.id,s),this.type="block",this.mustache=t,this.program=i,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID";for(var i="",r=[],s=0,o=0,n=t.length;n>o;o++){var a=t[o].part;if(i+=(t[o].separator||"")+a,".."===a||"."===a||"this"===a){if(r.length>0)throw new e.Exception("Invalid path: "+i);".."===a?s++:this.isScoped=!0}else r.push(a)}this.original=i,this.parts=r,this.string=r.join("."),this.depth=s,this.isSimple=1===t.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e.original},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.original=this.string=this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},e.AST.CommentNode=function(e){this.type="comment",this.comment=e};var n=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<n.length;t++)this[n[t]]=e[n[t]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var a={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,d=/[&<>"'`]/,c=function(e){return a[e]||"&"};e.Utils={extend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":(t=t.toString(),d.test(t)?t.replace(l,c):t)},isEmpty:function(e){return e||0===e?"[object Array]"===i.call(e)&&0===e.length?!0:!1:!0}};var u=e.Compiler=function(){},h=e.JavaScriptCompiler=function(){};u.prototype={compiler:u,disassemble:function(){for(var e,t,i,r=this.opcodes,s=[],o=0,n=r.length;n>o;o++)if(e=r[o],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var a=0;a<e.args.length;a++)i=e.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),t.push(i);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;t>i;i++){var r=this.opcodes[i],s=e.opcodes[i];if(r.opcode!==s.opcode||r.args.length!==s.args.length)return!1;for(var o=0;o<r.args.length;o++)if(r.args[o]!==s.args[o])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(i=0;t>i;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var r in i)this.options.knownHelpers[r]=i[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t,i=e.statements;this.opcodes=[];for(var r=0,s=i.length;s>r;r++)t=i[r],this[t.type](t);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,i=(new this.compiler).compile(e,this.options),r=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[r]=i;for(var s=0,o=i.depths.list.length;o>s;s++)t=i.depths.list[s],2>t||this.addDepth(t-1);return r},block:function(e){var t=e.mustache,i=e.program,r=e.inverse;i&&(i=this.compileProgram(i)),r&&(r=this.compileProgram(r));var s=this.classifyMustache(t);"helper"===s?this.helperMustache(t,i,r):"simple"===s?(this.simpleMustache(t),this.opcode("pushProgram",i),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,i,r),this.opcode("pushProgram",i),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,i,r=e.pairs;this.opcode("pushHash");for(var s=0,o=r.length;o>s;s++)t=r[s],i=t[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type)):this.accept(i),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,i=this.classifyMustache(e);"simple"===i?this.simpleMustache(e):"helper"===i?this.helperMustache(e):this.ambiguousMustache(e),this.opcode(e.escaped&&!t.noEscape?"appendEscaped":"append")},ambiguousMustache:function(e,t,i){var r=e.id,s=r.parts[0],o=null!=t||null!=i;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,o)},simpleMustache:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,i){var r=this.setupFullMustacheParams(e,t,i),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",r.length,s)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var i=1,r=e.parts.length;r>i;i++)this.opcode("lookup",e.parts[i])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new e.Exception("Scoped data references are not supported: "+t.original);this.opcode("lookupData");for(var i=t.id.parts,r=0,s=i.length;s>r;r++)this.opcode("lookup",i[r])
},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifyMustache:function(e){var t=e.isHelper,i=e.eligibleHelper,r=this.options;if(i&&!t){var s=e.id.parts[0];r.knownHelpers[s]?t=!0:r.knownHelpersOnly&&(i=!1)}return t?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t,i=e.length;i--;)t=e[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,i){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var p=function(e){this.value=e};h.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":h.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,i,r,s){this.environment=t,this.options=i||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,i);var o,n=t.opcodes;for(this.i=0,v=n.length;this.i<v;this.i++)o=n[this.i],"DECLARE"===o.opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(s)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,i="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(i+=" data = data || {};"),e.push(i)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var i=this.stackVars.concat(this.registers.list);if(i.length>0&&(this.source[1]=this.source[1]+", "+i.join(", ")),!this.isChild)for(var r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,n=this.environment.depths.list.length;n>o;o++)s.push("depth"+this.environment.depths.list[o]);var a=this.mergeSource();if(!this.isChild){var l=e.COMPILER_REVISION,d=e.REVISION_CHANGES[l];a="this.compilerInfo = ["+l+",'"+d+"'];\n"+a}if(t)return s.push(a),Function.apply(this,s);var c="function "+(this.name||"")+"("+s.join(",")+") {\n  "+a+"}";return e.log(e.logger.DEBUG,c+"\n\n"),c},mergeSource:function(){for(var e,i="",r=0,s=this.source.length;s>r;r++){var o=this.source[r];o.appendToBuffer?e=e?e+"\n    + "+o.content:o.content:(e&&(i+="buffer += "+e+";\n  ",e=t),i+=o+"\n  ")}return i},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=t,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context");this.push(i.name+" || "+r),this.replaceStack(function(e){return e+" ? "+e+".call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var i=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();this.source.push("if ("+o+" = "+r+") { "+o+" = "+o+".call("+i.callParams+"); }"),this.source.push("else { "+o+" = "+s+"; "+o+" = typeof "+o+" === functionType ? "+o+".apply(depth0) : "+o+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,i,r=this.popStack();this.options.stringParams&&(i=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push("'"+e+"': "+t),i&&s.types.push("'"+e+"': "+i),s.values.push("'"+e+"': ("+r+")")},compiler:h,compileChildren:function(e,t){for(var i,r,s=e.children,o=0,n=s.length;n>o;o++){i=s[o],r=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=r.compile(i,t,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;i>t;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,i=this.environment.children[e],r=i.depths.list,s=[i.index,i.name,"data"],o=0,n=r.length;n>o;o++)t=r[o],s.push(1===t?"depth0":"depth"+(t-1));return(0===r.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new p(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i="",r=this.isInline();if(r){var s=this.popStack(!0);if(s instanceof p)t=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(o)+" = "+s+"),",t=this.topStack()}}else t=this.topStack();var n=e.call(this,t);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+n+")")):(/^stack/.test(t)||(t=this.nextStack()),this.source.push(t+" = ("+i+n+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var r=e[t];r instanceof p?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();return!e&&i instanceof p?i.value:(t||this.stackSlot--,i)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof p?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,i){var r=[];this.setupParams(e,r,i);var s=this.nameLookup("helpers",t,"helper");return{params:r,name:s,callParams:["depth0"].concat(r).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,i){var r,s,o,n=[],a=[],l=[];n.push("hash:"+this.popStack()),s=this.popStack(),o=this.popStack(),(o||s)&&(o||(this.context.aliases.self="this",o="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),n.push("inverse:"+s),n.push("fn:"+o));for(var d=0;e>d;d++)r=this.popStack(),t.push(r),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(n.push("contexts:["+a.join(",")+"]"),n.push("types:["+l.join(",")+"]"),n.push("hashContexts:hashContexts"),n.push("hashTypes:hashTypes")),this.options.data&&n.push("data:data"),n="{"+n.join(",")+"}",i?(this.register("options",n),t.push("options")):t.push(n),t.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),g=h.RESERVED_WORDS={},m=0,v=f.length;v>m;m++)g[f[m]]=!0;h.isValidJavaScriptVariableName=function(e){return!h.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(t,i){if(null==t||"string"!=typeof t&&t.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);i=i||{},"data"in i||(i.data=!0);var r=e.parse(t),s=(new u).compile(r,i);return(new h).compile(s,i)},e.compile=function(i,r){function s(){var s=e.parse(i),o=(new u).compile(s,r),n=(new h).compile(o,r,t,!0);return e.template(n)}if(null==i||"string"!=typeof i&&i.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i);r=r||{},"data"in r||(r.data=!0);var o;return function(e,t){return o||(o=s()),o.call(this,e,t)}},e.VM={template:function(t){var i={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,i,r){var s=this.programs[t];return r?s=e.VM.program(t,i,r):s||(s=this.programs[t]=e.VM.program(t,i)),s},merge:function(t,i){var r=t||i;return t&&i&&(r={},e.Utils.extend(r,i),e.Utils.extend(r,t)),r},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,s){s=s||{};var o=t.call(i,e,r,s.helpers,s.partials,s.data),n=i.compilerInfo||[],a=n[0]||1,l=e.COMPILER_REVISION;if(a!==l){if(l>a){var d=e.REVISION_CHANGES[l],c=e.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+")."}return o}},programWithDepth:function(e,t,i){var r=Array.prototype.slice.call(arguments,3),s=function(e,s){return s=s||{},t.apply(this,[e,s.data||i].concat(r))};return s.program=e,s.depth=r.length,s},program:function(e,t,i){var r=function(e,r){return r=r||{},t(e,r.data||i)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(i,r,s,o,n,a){var l={helpers:o,partials:n,data:a};if(i===t)throw new e.Exception("The partial "+r+" could not be found");if(i instanceof Function)return i(s,l);if(e.compile)return n[r]=e.compile(i,{data:a!==t}),n[r](s,l);throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template}(Handlebars);var saveObj={init:function(){debug.log("Save Obejct init");var e=this;return jQuery(".saveButton").each(function(){var t=jQuery(this),i=(t.attr("id"),t.attr("data-mode")||null),r=t.closest("form").attr("id"),s=void 0==t.attr("data-form-bind")?1:parseInt(t.attr("data-form-bind")),o=void 0==t.attr("data-form-req")?1:parseInt(t.attr("data-form-req"));if(s){t.unbind("click");var n=function(){t.hasClass("inprogress")?(e.openRequiredDialog(r,"Save in progress","Save is disabled"),debug.error("Save is in progress! No duplicate save clicks!")):t.hasClass("disabled")?o?(e.openRequiredDialog(r,"Please check that the required fields are not empty.<br /> Ensure proper format for fields.","Save is disabled"),debug.warn("Save is disabled! Check are there any mandatory fields left empty.","Autorequired:"+o,"Autobind:"+s)):debug.error("You have sent Autorequred check attribute to be disabled, handle openDialog yourself!!!"):(t.addClass("inprogress"),e.save(r,i))};t.bind("click",n)}o&&jQuery("#"+r).find(".required").each(function(){jQuery(this).find("input, textarea").input(function(){debug.log("Autobind input element for form id:"+r+" - "+jQuery(this).attr("id")),e.toggleSave(r)})})}),this},getValidationMsg:function(e){var t="",i=new Array;if(void 0==e)throw"Invalid argument supplied for save.getValidationMsg()";if(void 0!=e.errors&&void 0!=e.errors.validation)for(var r in e.errors.validation)if("object"==typeof e.errors.validation[r])for(var s in e.errors.validation[r])if("object"==typeof e.errors.validation[r][s])for(var o in e.errors.validation[r][s])i.indexOf(e.errors.validation[r][s][o][0])<0&&(t+=" "+e.errors.validation[r][s][o]+"<br/>",i.push(e.errors.validation[r][s][o][0]));else i.indexOf(e.errors.validation[r][s][0])<0&&(t+=" "+e.errors.validation[r][s]+"<br/>",i.push(e.errors.validation[r][s][0]));else i.indexOf(e.errors.validation[r][0])<0&&(t+=" "+e.errors.validation[r]+"<br/>",i.push(e.errors.validation[r][0]));return t.replace("<br/>"," ")},save:function(e,t,i){debug.log("Form id:",e,"Mode:",t);var r=jQuery("#"+e);if(0==r.length&&debug.error("Warrning: (Ko god da testira - ovo nije error) - Form does not exist!!! Check data-form-id attribute on your save button"),debug.log("Form",r),void 0!=i)var s=jQuery("#"+i);else var s=jQuery("#"+e).find(".saveButton");0==s.length&&(debug.error("No save button by form.id, try to search all document."),s=jQuery(document).find(".saveButton")),debug.log("Save obj:",s.length,e),debug.log("Save obj:","data-method",s.attr("data-method"));var o=s.attr("data-method-before");void 0!=o&&$Brid.Util.executeCallback($Brid.Callbacks,o);var n=this,a=r.serialize(),l=r.attr("action")+(void 0!=t?t:"");l=l.split("?",1),jQuery.ajax({url:l,data:a,type:"POST",beforeSend:function(){}}).done(function(e){debug.log("Save done:",e);var t="";if(jQuery("#busy-indicator").hide(),s.removeClass("inprogress"),"success"!=e.status){void 0!=e.message&&(t+=e.message);try{var i=jQuery.parseJSON(e);void 0!=i.name&&(t+=i.name)}catch(r){}t+=n.getValidationMsg(e),void 0!=e.error&&"string"==typeof e.error&&(t+=e.error),alert("Message: "+t)}else{var o=s.find(".buttonLargeContent").html();s.find(".buttonLargeContent").html("SAVED!").delay(1e3).queue(function(e){jQuery(this).html(o),e()}),debug.log("Save callback:",s.attr("data-method")),s.ajaxResponse=e,$Brid.Util.executeCallback($Brid.Callbacks,s.attr("data-method"),s);var a=s.attr("data-callback");void 0!=a&&(e.callback=a);var l=s.attr("data-colorbox-close");l=void 0==l?!0:parseInt(l);var d=s.attr("data-redirect");void 0!=d&&(e.redirect=null);try{l&&jQuery.colorbox.close()}catch(r){debug.warn("Fancy box close in save method.")}if(void 0!=e.redirect&&void 0!=e.callback){var c=void 0!=e.callback?e.callback:"insertContentVideos",u="insertContentVideos"==c?"Videos-content":"Playlists-content";$Brid.Api.call({data:$Brid.Util.getRedirectUrl(e.redirect),callback:{after:{name:c,obj:jQuery("#"+u)}}})}void 0!=e.externalId&&void 0!=e.videoId&&jQuery("td#td"+e.externalId+" a").attr("data-id",e.videoId)}}).fail(function(e,t,i){var r=jQuery.parseJSON(e.responseText);debug.log("Save FAIL response:",r,t,i),$Brid.Html.FlashMessage.show({msg:r.name,status:!1})})},toggleSave:function(e){debug.log("saveObj.toggleSave",e);var t=[];jQuery("#"+e).find(".required").each(function(){t.push(jQuery(this).find("input, textarea").attr("id"))}),debug.log("saveObj.toggleSave","Required:",t);if(jQuery(t).each(function(i,r){var s=jQuery("#"+e).find("#"+r);if(""!=s.val()){var o=t.indexOf(r);t.splice(o,1)}}),debug.log("saveObj.toggleSave","Required after checking values:",t),0==t.length)jQuery("#"+e).find(".saveButton").removeClass("disabled");else{var i=jQuery("#"+e).find(".saveButton");i.hasClass("disabled")||i.addClass("disabled")}},openRequiredDialog:function(e,t,i){debug.log("openRequiredDialog",e,t,i);var r="",s=[],o=jQuery("#"+e).find(".saveButton"),n=void 0==o.attr("data-form-req")?1:parseInt(o.attr("data-form-req"));if(debug.log(e),n){if(jQuery("#"+e).find(".required").each(function(){jQuery(this).find("input, textarea, select").each(function(){var e="";"ChannelIdUpload"!=jQuery(this).attr("id")||isCategorySelected()?""==jQuery(this).val()&&(e=jQuery(this).attr("id").split(/(?=[A-Z])/),s.push(e.join(" "))):(e="Select category".split(/(?=[A-Z])/),s.push(e.join(" ")))})}),debug.log("Req fields",s),s.length>0){r="<br/><br/><p><h5>Notice:</h5></p>",r+='<p style="color:#939598;">Please make sure that these fields are filled correctly:</p>',r+='<ul class="requiredFieldsLightbox">';for(var a in s)r+="<li>"+s[a]+"</li>";r+="</ul>"}s.length<=0&&jQuery("#"+e).find(".saveButton").removeClass("disabled")}$Brid.Util.openDialog(t+r,i)}},inputTimer=null;if(function(e,t){var i=".inputEvent ",r="bound.inputEvent",s="value.inputEvent",o="delegated.inputEvent",n=["input","textInput","propertychange","paste","cut","keydown","drop",""].join(i),a=["focusin","mouseover","dragstart",""].join(i),l={TEXTAREA:t,INPUT:t},d={paste:t,cut:t,keydown:t,drop:t,textInput:t};e.event.special.txtinput={setup:function(t,i,c){function c(t){var i=t.target;window.clearTimeout(inputTimer),inputTimer=null,f||(t.type in d&&!inputTimer?inputTimer=window.setTimeout(function(){i.value!==e.data(i,s)&&(e(i).trigger("txtinput"),e.data(i,s,i.value))},0):"propertychange"==t.type?"value"==t.originalEvent.propertyName&&(e(i).trigger("txtinput"),e.data(i,s,i.value),f=!0,window.setTimeout(function(){f=!1},0)):(e(i).trigger("txtinput"),e.data(i,s,i.value),f=!0,window.setTimeout(function(){f=!1},0)))}var u,h=this,p=e(this),f=!1;h.tagName in l?(u=e.data(h,r)||0,u||p.bind(n,c),e.data(h,r,++u),e.data(h,s,h.value)):p.bind(a,function(t){var i=t.target;i.tagName in l&&!e.data(h,o)&&(u=e.data(i,r)||0,u||i.bind(n,c),e.data(h,o,!0),e.data(i,r,++u),e.data(i,s,i.value))})},teardown:function(){var t=e(this);t.unbind(a),t.find("input, textarea").andSelf().each(function(){bndCount=e.data(this,r,(e.data(this,r)||1)-1),bndCount||t.unbind(n)})}},e.fn.input=function(e){return e?this.bind("txtinput",e):this.trigger("txtinput")}}(jQuery),void 0==DEBUGMODE)var DEBUGMODE=!1;var debug=function(){var e=["log","warn","group","groupCollapsed","groupEnd"],t={};return jQuery(e).each(function(e,i){t[i]=function(){window.console&&DEBUGMODE&&(void 0!=window.console[i]?console[i].apply(console,arguments):console.log.apply(console,arguments))}}),t.warn=function(){window.console&&console.warn.apply(console,arguments)},t.error=function(){window.console&&console.error.apply(console,arguments)},t}(),ArgumentException=function(e,t){this.name="ArgumentException",this.message=e,this.param=t,this.stack=(new Error).stack},DeprecatedMethodException=function(e){this.name="DeprecatedMethodException",this.message=e,this.stack=(new Error).stack,$_this=this,this.showMsg=function(){debug.error($_this.name,$_this.message,$_this.stack)}};ArgumentException.prototype=new Error,DeprecatedMethodException.prototype=new Error,Date.prototype.toPrettyFormat=function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];return e[this.getMonth()]+" "+this.getUTCDate()+", "+this.getUTCFullYear()},String.prototype.toHHMMSS=function(){sec_numb=parseInt(this);var e=Math.floor(sec_numb/3600),t=Math.floor((sec_numb-3600*e)/60),i=sec_numb-3600*e-60*t;return 10>e&&(e="0"+e),10>t&&(t="0"+t),10>i&&(i="0"+i),("00"!=e?e+":":"")+t+":"+i},window.$Brid=function(){return{timer:[],timeout:[],methods:["dropdown","datepicker","Html.Selectbox","Html.Tabs","Html.GoogleCheckbox","Html.DefaultInput","Html.Button","Html.CheckboxElement","Html.Radio","Html.Sticky","Html.Tooltip"],killTimer:function(e){return debug.log("$Brid.killTimer()",e),void 0==e?!1:void(void 0!=$Brid.timer[e]&&(clearInterval($Brid.timer[e]),$Brid.timer[e]=null))},stopTimeout:function(e){return void 0==e?!1:void(void 0!=$Brid.timeout[e]&&(clearTimeout($Brid.timeout[e]),$Brid.timeout[e]=null))},datepicker:function(){debug.log("$Brid.datepicker()","Datepicker is jQuery plugin.");try{jQuery(".datepicker").datepick("destroy"),jQuery(".datepicker").datepick({changeMonth:!0,changeYear:!0,dateFormat:"dd-mm-yy",showAnim:"fadeIn",disalbed:!0}).on("change",function(){})}catch(e){}},dropdown:function(){debug.log("$Brid.dropdown()",'Init all "dropdownMenu" class elements. Jquery dropdown.'),jQuery(".dropdownMenu").dropdown("destroy"),jQuery(".dropdownMenu").dropdown()},init:function(e){if(void 0!=e&&"object"!=typeof e)throw new ArgumentException('$Brid.init argument must be typeof object. Try: $Brid.init(["Html.Checkbox"])');var t=null;t=void 0!=e?e:this.methods,debug.log("METHODS;",e);for(var i in this.timer)this.killTimer(i);for(var i in this.timeout)this.stopTimeout(i);debug.group("INIT");for(var r in t)try{var s=null,o=null,n=null;if("string"==typeof t[r]&&(s=t[r]),"object"==typeof t[r]&&(s=t[r][0],o=t[r][1]),debug.groupCollapsed(s),void 0==this[s]){debug.log("Auto execute init method.",s);var a=s.split(".");try{if(void 0==a||void 0==a[0])throw new ArgumentException("Object/Method not defined ("+s+"). Try to use: Object.Object e.g. Html.Button");void 0==a[1]?$Brid[a[0]].init():$Brid[a[0]][a[1]].init(o)}catch(l){n=l,DEBUGMODE?debug.error("Error AutoExecute:",a,l.message,l.stack):debug.error("Error AutoExecute:",a,l.message,l)}finally{handleImportantError(n,"Object initialization failed <b>("+s+")</b>")}}else debug.log("Method defined in $Brid object, so execute it."),this[s].apply(this,o);debug.groupEnd()}catch(l){debug.error("Error init:",l.message,"Method $Brid."+t[r]+"() does not exist?")}return debug.groupEnd(),"Init end"}}}(jQuery),$Brid.Callbacks={className:"$Brid.Callbacks",onPlaylistSave:function(e){debug.log("callback","onPlaylistSave",e.ajaxResponse),jQuery("#VideoId").val(e.ajaxResponse.videoId),jQuery("#autoSaving").html("Saved"),$Brid.Util.shortCode(e.ajaxResponse.Playlist.id,$BridWordpressConfig.Player.id,e.ajaxResponse.Playlist.name,"playlist"),jQuery.colorbox.close()},addToAdList:function(e){debug.log("Callback:addToAdList",e);var t=e.obj.attr("data-type");jQuery("#brid-boxes-content").prepend(e.response),e.obj.find(":first").addClass("add-midroll-ad-disabled"),$Brid.init(["dropdown","Html.DefaultInput"]),ads[currentAdCount]=t,currentAdCount++,jQuery(".brid-box-remove").off("click",removeAdBox).on("click",removeAdBox)},refreshAdList:function(e){if(debug.log("Callback:refreshAdList",e),void 0!=e.response&&e.response.success){debug.log("Call: save.toggleSave from refreshAdList function.");try{save.toggleSave()}catch(t){}var i=e.obj.attr("data-iterator");e.obj.closest(".brid-box-container").fadeOut(300,function(){jQuery(this).remove()}),jQuery("#brid-box-"+i).fadeOut(300,function(){jQuery(this).remove()});var r=e.obj.attr("data-type");delete ads[i],debug.log("remove midroll"),jQuery("#add-"+r+"-ad").removeClass("add-midroll-ad-disabled"),jQuery(".brid-box-remove").off("click",removeAdBox).on("click",removeAdBox)}},toggleEmbedCodeType:function(e){debug.log("Callback object","toggleEmbedCodeType",e.val()),jQuery("#dynamicOptions").children().hide(),jQuery("#"+e.val()).length>0&&(jQuery("#"+e.val()).fadeIn(),""==jQuery("#"+e.val()).val()&&"tag"==e.val()?jQuery("#postPlaylistDynamic").addClass("disabled"):jQuery("#postPlaylistDynamic").removeClass("disabled")),debug.log(e.val())},partnerCreateSnapshot:function(){window.location=settingsUrl},updatePlaylistItems:function(e){debug.log("Callback object","updatePlaylistItems",e),jQuery(".playlist-item").css("left","0px"),updateNumbers(),jQuery(".disablePlaylistOrder").fadeOut(),hideOver()},itemsAddedToPlaylist:function(e){if(debug.log("Callback object","itemsAddedToPlaylist",e),void 0!=e.response.playlist_videos){var t=!1,i=jQuery("#sortable");if(i.length>0){var r=i.children().length+1,s="";for(var o in e.response.playlist_videos){t=!0;var n=e.response.playlist_videos[o];s=jQuery("#video-img-"+o).attr("src"),debug.log("FOUND SRC:",s),"/img/indicator.gif"==s&&(s=jQuery("#video-img-"+o).attr("data-original")),i.append('<a href="javascript:void(0)" style="position:relative;" id="video-thumb-id-'+o+'" class="playlist-item tooltip" data-ajax-loaded="true" data-info="'+jQuery("#video-title-"+o).html()+'" > <img src="'+s+'" width="120px" height="104px" /><div class="hoverDiv"></div><div class="playlist_delete_video" data-id="'+n+'" data-video-id="'+o+'"></div><div class="playlist_number" id="playlist-number-'+(r+1)+'"><span>'+r++ +'</span></div> <div class="time">'+jQuery("#video-duration-"+o).html()+"</div></a>"),updateSortableWidth()}}t&&(initPlaylistMainFunctions(),jQuery.colorbox.close())}},removePlaylistSingleItem:function(e){debug.log("Callback object","removePlaylistSingleItem",e);var t=e.obj.attr("data-video-id");jQuery("#video-thumb-id-"+t).fadeOut(function(){jQuery(this).remove(),updateNumbers(),window.updateSortableWidth()})},removePlaylistItems:function(e){debug.log("Callback object","removePlaylistItems",e),jQuery("#sortable").children().each(function(){jQuery(this).fadeOut(function(){jQuery(this).remove()})})},disableVideoTitle:function(e){debug.log("Callback object","disableVideoTitle",e);var t=e.obj.attr("data-id"),i=jQuery("#video-title-"+t);e.obj.parent().hasClass("turnedoff")?i.addClass("videoTitleDisabled"):i.removeClass("videoTitleDisabled")},channelSelected:function(e){debug.log("Callback object","channelSelected");var t=jQuery(e).find(":selected").val(),i=jQuery(e).find(":selected").text();t>0&&addVideoFromSearch(t,i)},deleteVideos:function(e){debug.log("Callback object","deleteVideos",e);var t=e.response;if(void 0!=t.redirect){var i="insertContent"+e.obj.model+"s",r="#"+e.obj.model+"s-content";$Brid.Api.call({data:$Brid.Util.getRedirectUrl(t.redirect),callback:{after:{name:i,obj:jQuery(r)}}})}},onPlaylistUpdate:function(){var e=jQuery("#PlaylistName").val();jQuery(".bridItem").each(function(){jQuery(this).hasClass("selected")&&jQuery(this).find(".filename").html("<div>"+e+"</div>")})},onVideoUpdate:function(e){debug.log("onVideoUpdate",e,"bridItem",jQuery(".bridItem"));var t=jQuery("#VideoName").val();jQuery(".bridItem").each(function(){jQuery(this).hasClass("selected")&&jQuery(this).find(".filename").html("<div>"+t+"</div>")})},onVideoSave:function(e){debug.log("Callback object","onVideoSave",e.ajaxResponse),jQuery("#VideoId").val(e.ajaxResponse.videoId),jQuery("#autoSaving").html("Saved");try{void 0!=$BridWordpressConfig&&void 0!=$BridWordpressConfig.Player&&$Brid.Util.shortCode(e.ajaxResponse.videoId,$BridWordpressConfig.Player.id,e.ajaxResponse.Video.Video.name)}catch(t){debug.error("onVideoSave callback error",t)}},refreshAddYoutube:function(e){debug.log("Callback object","refreshAddYoutube",e),jQuery("#ytSearchInfo").hide(),$Brid.Api.call({data:{action:"addYoutube"},callback:{after:{name:"insertContent",obj:jQuery("#Videos-content")}}})},insertContentPaginationPlaylist:function(e){debug.log("insertContentPaginationPlaylist",e),e.obj.html(e.response),bindBridPlaylistItemClick(),bindBridPlaylistPagination(),bindPlaylistTitle(),initSelected()},insertContentPagination:function(e){debug.log("insertContentPagination",e),e.obj.html(e.response),bindBridItemClick(),bindBridPagination()},insertContent:function(e){if(debug.log("$Brid.Callbacks.insertContent",e.obj),void 0==window.currentDivView)return!1;if(void 0!=e.obj){var t=e.obj.attr("id");jQuery("#postTabs").children().each(function(e,i){var r=jQuery(i).attr("id");void 0!=r&&r+"-content"!=t+"_content"&&jQuery("#"+r+"-content").hide()}),debug.log("$Brid.Callbacks.insertContent ID:",t);var i=["Videos-content","Playlists-content"];t!=currentDivView&&-1!=jQuery.inArray(t,i)&&(jQuery("#"+currentDivView).length>0&&jQuery("#"+currentDivView).html(""),currentDivView=t),e.obj.html(e.response).fadeIn("fast",function(){debug.log("Call initBridMain from insertContent"),initBridMain()})}},insertContentVideos:function(e){debug.log("$Brid.Callbacks.insertContentVideos"),$Brid.Callbacks.insertContent(e)},insertContentPlaylists:function(e){debug.log("$Brid.Callbacks.insertContentPlaylists"),$Brid.Callbacks.insertContent(e)},bridPlayerList:function(e){debug.log("$Brid.Callbacks.bridPlayerList",e);var t=(e.response,jQuery("#checkbox-PartnerIntroVideo").find("input")),i=$Brid.Html.CheckboxElement.create({name:"PartnerIntroVideo"});1==e.response.Partner.intro_video?i.select(t):i.deselect(t),i.toggleIntroTable(t),jQuery("#IntroVideo").val(e.response.Partner.intro_video_url),jQuery("#playerListSelect").html("");for(var r in e.response.Players){var s=e.response.Players[r].Player,o=(e.response.Players[r].Skin,"");void 0!=playerSelected&&playerSelected==s.id&&(o="SELECTED");var n=jQuery('<option value="'+s.id+'" '+o+">"+s.name+" - ["+s.width+" X "+s.height+"]</option>");"SELECTED"==o&&n.prop("selected",!0),n.data(e.response.Players[r]),jQuery("#playerListSelect").append(n)}jQuery("#playerListSelect").trigger("liszt:updated"),playerChanged()
},initPlayer:function(e){debug.log("Callback object","initPlayer");var t=jQuery(e).attr("data-id"),i=jQuery(e).attr("data-open"),r=jQuery(e).attr("data-callback-args"),s=jQuery.parseJSON(r),o=jQuery("#tableRowContent"+t),n=jQuery(o).find("."+i);if(debug.log("Saljem playeru:",s),jQuery(n).hasClass("playerDiv")&&1==jQuery(n).find(".loadingPreviewPlayer").length){jQuery(n).find(".loadingPreviewPlayer").fadeOut(300,function(){jQuery(this).remove()});var a=o.find(".brid").attr("id");debug.log("PLAYER INIT FROM CMS CODE",s,a),$bp(a,s)}else debug.log("Do not reload player again. It should be already loaded (.loadingPreviewPlayer div should not exist for this player)")},changeOverText:function(e){debug.log("Callback object","changeOverText");var t=jQuery(e).attr("data-id"),i=jQuery(e).attr("data-open");try{var r=jQuery("#tableRowContent"+t),s=r.find(".brid").attr("id");debug.log("Try brid player stop: ID:",s),$bp(s).stop()}catch(o){}var n=function(e){var t=jQuery("#tableRowContent"+e),i=t.find(".videoPlay");t.find(".videoPreviewBg").hide(),i.hide().removeClass("disableHover")},a=function(e){var t=jQuery(e).attr("data-id"),i=jQuery("#tableRowContent"+t),r=i.find(".videoPlay");jQuery(".hiddenContnet").each(function(){jQuery(this).attr("data-id")!=t&&n(jQuery(this).attr("data-id"))}),r.hasClass("disableHover")?r.removeClass("disableHover"):r.addClass("disableHover")};"playerDiv"==i?a(e):n(t)},addVideoChannelChanged:function(){enableSave(),$Brid.Video.checkAutosaveMessage()},setPremium:function(){if(debug.log("setPremium callback"),jQuery("#bridNoticePremiumPlan").length>0&&jQuery("#bridNoticePremiumPlan").hide(),jQuery("#premiumPlanConfirm").hasClass("disabled")){var e="Your request has been successfully sent.<br /> Please allow 2-3 days so we can process your request. <br />An account manager will contact you as soon as possible.<br />";e+='<div class="premiumSuccess"></div>',$Brid.Api.call({data:{action:"addVideo"},callback:{after:{name:"insertContent",obj:jQuery("#Videos-content")}}}),jQuery("#uploadRules").addClass("premiumSuccessMessage").html(e),jQuery.colorbox.resize({innerHeight:"180px"})}else $Brid.Api.call({data:{action:"addVideo"},callback:{after:{name:"insertContent",obj:jQuery("#Videos-content")}}}),jQuery.colorbox.close()}};var Api={call:function(e){debug.log("$Brid.Api.call()");var t=jQuery.extend(!0,{},e);void 0==t.url&&(t.url=ajaxurl),void 0==t.requestType&&(t.type="POST"),debug.log("Config",t,"Arg:",e,"Data:",e.data),t.beforeSend=function(){jQuery("#bridSpiner").show()},void 0!=t.callback.before&&("function"==typeof t.callback.before?(debug.log("After callback is function"),t.callback.before.call(this,t)):$Brid.Callbacks[t.callback.before.name].call($Brid.Callbacks,t)),jQuery.ajax(t).done(function(e){if(jQuery("#bridSpiner").hide(),void 0==e.error){if(debug.log("$Brid.Api.call()","Success"),void 0!=t.callback&&void 0!=t.callback.after&&void 0!=t.callback.after.name)if("function"==typeof t.callback.after)debug.log("After callback is function"),t.callback.after.call(this,e);else{var i={response:e};void 0!=t.callback.after.obj&&(i.obj=jQuery.extend(!0,t.callback.after.obj,{response:e})),$Brid.Callbacks[t.callback.after.name].call($Brid.Callbacks,i)}}else alert("Error: "+e.error)})}};$Brid.Api=jQuery.extend(!0,{},Api),$Brid.Html={};var Effect={encodingStatus:function(e,t){switch(e){case 4:t.html("Uploading");break;case 6:t.html("Downloading")}},encoding:function(){debug.log("$Brid.Html.Effect.encoding()"),jQuery(".encodingProgressBarMove").each(function(){var e=jQuery(this).attr("data-progress"),t=666,i=parseInt(jQuery(this).width()),r=e*t/100,s=0!=i&&"NaN"!=i?r-i:r;jQuery(this).animate({width:"+="+s},300,function(){})})},initImageHover:function(){debug.log("$Brid.Html.Effect.initImageHover()"),$Brid.stopTimeout("Effect.hover"),jQuery(".centerImgWrapper").off("mouseenter",e).off("mouseleave",t);var e=function(){$Brid.stopTimeout("Effect.hover"),$this=jQuery(this),$Brid.timeout["Effect.hover"]=setTimeout(function(){debug.log("SHOW HOVER, timeout",$Brid.timeout["Effect.hover"]),$this.find(".videoPreviewBg").fadeIn(250),$this.find(".videoPlay").fadeIn(150),$this.find(".videoStatusText").hide(),$Brid.stopTimeout("Effect.hover")},100)},t=function(){$Brid.stopTimeout("Effect.hover"),jQuery(this).find(".videoPlay").hasClass("disableHover")||(jQuery(this).find(".videoPreviewBg").fadeOut(150),jQuery(this).find(".videoPlay").fadeOut(150),jQuery(this).find(".videoStatusText").show())};jQuery(".centerImgWrapper").on("mouseenter",e).on("mouseleave",t)},initAnimation:function(){debug.log("$Brid.Html.Effect.initAnimation()");var e=jQuery(this);debug.log("$this",e);var t=e.attr("data-open"),i=e.attr("data-id"),r=e.attr("data-callback"),s=e.attr("data-callback-before"),o=jQuery("#tableRowContent"+i),n=o.find(".hiddenContnet"),a=jQuery(o).find("."+t),l=a.attr("class");o.parent().parent().addClass("disableHover"),jQuery(".hiddenContnet").each(function(){if(jQuery(this).attr("data-id")!=i){var e=jQuery(this).find(".playerDiv");debug.log("playerDiv",jQuery(this).attr("data-id"),i),jQuery(this).children().each(function(t,i){if(jQuery(this).is(":visible")){if(jQuery(this).hasClass("playerDiv")){var r=jQuery(e).find(".brid").attr("id");debug.log("Try brid player stop on opened player: ID:",r),void 0!=r&&$bp(r).stop()}jQuery(i).animate({height:"toggle"},300,function(){})}});var t=jQuery("#tableRowContent"+jQuery(this).attr("data-id"));t.parent().parent().removeClass("disableHover")}}),jQuery(n).children().each(function(){jQuery(this).hasClass(l)||jQuery(this).fadeOut()}),void 0!=s&&$Brid.Util.executeCallback($Brid.Callbacks,s,e),jQuery(a).animate({opacity:1,height:"toggle"},400,function(){void 0!=r&&$Brid.Util.executeCallback($Brid.Callbacks,r,e),jQuery(this).is(":visible")||o.parent().parent().removeClass("disableHover")})},lazyload:function(){debug.log("$Brid.Html.Effect.lazyload()","completeRefresh - lazy load");var e={effect:"fadeIn",failure_limit:10};jQuery("img.lazy").each(function(){-1!==jQuery(this).attr("src").indexOf("indicator")&&jQuery(this).lazyload(e)})},scrollUp:function(){return debug.log("$Brid.Html.Effect.scrollUp()"),jQuery("body,html").animate({scrollTop:0},500),!1}};$Brid.Html.Effect=jQuery.extend(!0,{},Effect);var Button={init:function(){debug.log("$Brid.Html.Button.hover()"),jQuery(".button, .textButtonSmall, .delButtonSmall, .videoGetEmbed, .opacityButton").hover(function(){jQuery(this).stop().animate({opacity:.8},250)},function(){jQuery(this).stop().animate({opacity:1})}),jQuery(".partner-quick-menu li:not(.disabled) div").hover(function(){jQuery(this).stop().animate({opacity:.6},250)},function(){jQuery(this).stop().animate({opacity:1})})},initDelete:function(e){if(void 0==e.buttonId)throw new ArgumentException('Argment "buttonId" must be defined.');jQuery("#"+e.buttonId).click(function(t){t.preventDefault();var i=e.model.toLowerCase(),r=$Brid.Html.CheckboxElement.getSelectedCheckboxes(i+"-id-"),s=("delete"+e.model+"s",{});s.data={},s.data.action="delete"+e.model+"s",s.data["data["+e.model+"][ids]"]=r.join(","),s.callback={after:{name:"deleteVideos",obj:{model:e.model}}},$Brid.Api.call(s)})}};$Brid.Html.Button=jQuery.extend(!0,{},Button);var Tabs={init:function(){debug.log("$Brid.Html.Tabs.init()");var e=jQuery(".tabs");e.each(function(){var e=jQuery(this),t=parseInt(e.width()),i=e.children().length,r=2*(i-1),s=parseInt((t-r)/i),o=parseInt(t-r-(i-1)*s);debug.log(t,i,s,o)}),e.children().off("click",this.click),e.children().on("click",this.click)},click:function(){debug.log("$Brid.Html.Tabs.click","Executed method on Tab click");var e=jQuery(this),t=e.attr("id");if(e.hasClass("disabled"))$Brid.Util.openDialog('This tab is disabled, since "Type" of the Skin you have selected is templatized. <br/>Choose "Custom" Type to add/change Style properties.',"Tab disabled");else{jQuery(".tabContent").hide();var i=e.parent().children();i.each(function(){var e=jQuery(this),t=e.attr("id");jQuery("#"+t+"-content").hide(),e.removeClass("tab").addClass("tab-inactive"),e.find(".arrowDown").addClass("hidden")}),e.find(".arrowDown").removeClass("hidden"),jQuery("#"+t+"-content").show(),e.removeClass("tab-inactive").addClass("tab"),e.hasClass("postTabsMenu")&&("Dynamics"==t?jQuery.colorbox.resize({height:"300px"}):("Videos"==t||"Playlists"==t)&&jQuery.colorbox.resize({innerHeight:"780px"}))}}};$Brid.Html.Tabs=jQuery.extend(!0,{},Tabs);var DefaultInput={init:function(){debug.log("$Brid.Html.DefaultInput.init()"),jQuery('input[type="text"], input[type="password"], textarea').each(function(e,t){var i=jQuery(this),r=i.parent(),t=i.val(),s=r.find(".defaultInputValue");if(t.length>0&&s.length>0)s.hide();else if(i.attr("default-value")){var o=i.attr("default-value"),n=i.attr("data-info"),a=void 0!=n&&""!=n?'data-info="'+n+'"':'data-info="'+o+'"',l="default-value-"+i.attr("id");if(!s.length>0){var d="padding-top:"+i.css("padding-top")+";";d+=""==t?"display:block;":"display:none;",i.parent().append('<div class="defaultInputValue" '+a+' style="'+d+'"id="'+l+'">'+i.attr("default-value")+"</div>"),i.keyup(function(){var e=jQuery(this).parent().find(".defaultInputValue");jQuery(this).val().length>0?e.hide():e.show()})}}}),jQuery(".defaultInputValue").off("click",this.click).on("click",this.click),this.center()},center:function(){debug.log("$Brid.Html.DefaultInput.center()"),jQuery(".defaultInputValue").each(function(){if(void 0==jQuery(this).attr("data-position")){var e=jQuery(this),t=e.parent(),i=(t.position(),t.find("label")),r=i.length,s=t.find("input, textarea"),o=(s.position(),s.height()),n=s.width(),a=(s.offset(),0),l=s.prop("tagName");"TEXTAREA"==l&&(o=12),void 0!=s.attr("data-offset")&&(a=parseInt(s.attr("data-offset")));var d=0;r&&(d=i.is(":visible")?parseInt(i.outerHeight(!0)):23),s.is(":visible")||(n+="%");var c=parseInt(s.css("font-size")),u=parseInt(s.css("margin-top")),h=parseInt(s.css("padding-top")),p=parseInt((o-c)/2)+u+h-a;p+=d,s.attr("default-value-fontsize")?(p+=(c-parseInt(s.attr("default-value-fontsize")))/2,c=s.attr("default-value-fontsize")):c=s.css("font-size"),e.css({top:p+"px",width:n+"px",paddingLeft:"5px",fontSize:c}),t.hasClass("required")||e.addClass("defaultValueIndent"),e.attr("data-position",!0)}})},click:function(){debug.log("$Brid.Html.DefaultInput.click","On default Input Div click event");{var e=jQuery(this);e.parent()}e.prev().select(),e.prev().val().length>0&&e.hide()}};$Brid.Html.DefaultInput=jQuery.extend(!0,{},DefaultInput);var CheckboxElement={init:function(){debug.log("$Brid.Html.CheckboxElement.init()","Init custom checkboxes."),jQuery(".bridCheckbox").off("click",this.click).on("click",this.click)},click:function(e){if(debug.log("$Brid.Html.CheckboxElement.click","Event"),jQuery(e.target).hasClass("checkboxContent")||jQuery(e.target).parent().hasClass("checkboxContent")){var t=jQuery(this),i=t.find(":input"),r=t.attr("data-method"),s=t.attr("data-name");if(t.hasClass("disabledCheckbox"))return debug.warn("Checkbox is disabled"),!1;var o=$Brid.Html.CheckboxElement.create({name:s});$Brid.Util.executeCallback(o,"toggle",i),$Brid.Util.executeCallback(o,r,i)}else debug.warn('"checkboxContent" class attr is missing on element you have clicked')},getSelectedCheckboxes:function(e){var t=[];return jQuery('input[id*="'+e+'"]').each(function(){jQuery(this).hasClass("checked")&&t.push(jQuery(this).attr("data-value"))}),t},Checkbox:{init:function(e){if(void 0==e.name)throw new ArgumentException('"name" property in argumnet object is missing. Try {name: "autoplay"}');return this.className="$Brid.HTml.CheckboxElement.Checkbox",this.name=e.name,this.id=void 0==e.id?e.name+"-id-":e.id,this.checkAll=e.name+"-check-all",this.parentId="checkbox-"+e.name+"-check-all",void 0!=e.targetElement&&(this.targetElement=e.targetElement),jQuery.extend(!0,{},this)},togglePlayerSize:function(e){var t=jQuery("#PlayerWidth"),i=jQuery("#PlayerHeight");1!=jQuery(e).val()?(t.removeClass("disabledInput"),i.removeClass("disabledInput")):(t.addClass("disabledInput"),i.addClass("disabledInput"))},toggleIntroTable:function(e){var t=jQuery("#introVideoTable");1==jQuery(e).val()?(t.removeClass("disabledInput"),jQuery("#intro_enabled").val(1)):(t.addClass("disabledInput"),jQuery("#intro_enabled").val(0))},deselectCheckboxAll:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.deselectCheckboxAll");var e=jQuery("#"+this.parentId).find("input");this.deselect(e)},embedCodeAutoplayToggle:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.embedCodeAutoplayToggle",e),$Brid.Html.Embed.Js.editVal([{name:"autoplay",value:jQuery(e).val()}]),$Brid.Html.Embed.Iframe.editVal([{name:"autoplay",value:jQuery(e).val()}])},toggleParterMonetizationOptions:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleParterMonetizationOptions"),jQuery("#monetizePartner").animate({height:"toggle"},500)},toggleControlsOptions:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleControlsOptions",e),1!=jQuery(e).val()?jQuery("#controlsBehavior").next().addClass("disabledCheckbox"):jQuery("#controlsBehavior").next().removeClass("disabledCheckbox")},toggleUploadOptions:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleUploadOptions",e),1!=jQuery(e).val()?jQuery("#upload").next().addClass("disabledCheckbox"):jQuery("#upload").next().removeClass("disabledCheckbox")},toggleGroup:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleGroup");var e=jQuery(this.targetElement).attr("data-id");debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleGroup",e,this),this.deselectAll();var t=cntNotSelected=0;jQuery("div.siteVideosNum").each(function(){if(jQuery(this).attr("data-group-name")==e){var i=jQuery(this).parent().parent().parent().find(".singleCheckbox"),r=i.parent().parent();r.hasClass("disabledCheckbox")?debug.log("Skeeped from selection: "+this.id):(t++,i.prop("checked",!0).addClass("checked").prev().show())}else cntNotSelected++}),t>0&&0==cntNotSelected&&this.checkSelectAll(),this.toggleTopMenu()},checkSelectAll:function(){jQuery("#checkbox-"+this.name+"-check-all img.checked").show(),jQuery("#checkbox-"+this.name+"-check-all input[type=hidden]").addClass("checked")},toggle:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.Toggle()",e),jQuery(e).hasClass("checked")?this.deselect(e):this.select(e),jQuery(e).attr("id")!=this.checkAll&&this.areAllSelected()},toggleAll:function(e){debug.log("Checkbox.toggleAll"),jQuery(e).hasClass("checked")?(this.selectAll(),this.togglePostButton(!0)):(this.deselectAll(),this.togglePostButton(!1))},select:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.select()",e),jQuery(e).attr("value","1").addClass("checked"),jQuery(e).prev().fadeIn(200)},selectAll:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.selectAll()",this.id);var e=jQuery("#"+this.parentId).find("input");if(void 0==e)throw Error("Checkbox input element not found.");this.select(e),debug.log("Select input ids:"+this.id),jQuery("input[id*="+this.id+"]").each(function(){var e=jQuery("#"+this.id).parent().parent().attr("class");-1!==e.indexOf("disabledCheckbox")?debug.log("Skeeped from selection: "+this.id):(debug.log("Select: "+this.id),jQuery("#"+this.id).prop("checked",!0).addClass("checked").prev().show())}),jQuery(".toolbarItem").fadeIn()},deselect:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.deselect()",e),jQuery(e).prev().hide(),jQuery(e).attr("value","1").removeClass("checked").prop("value","0")},deselectAll:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.deselectAll()",e);var e=jQuery("#"+this.parentId).find("input");this.deselect(e),jQuery(".toolbarItem").hide(),jQuery("#"+this.checkAll).prop("checked",!1).removeClass("checked"),jQuery("#"+this.checkAll).next().css("background-image","none"),jQuery("input[id*="+this.id+"]").removeClass("checked").prop("checked",!1).prop("value","0").prev().hide()},areAllSelected:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.areAllSelected()");var e=jQuery("input[id*="+this.id+"]").length,t=jQuery("input.checked[id*="+this.id+"]").length,i=jQuery("#"+this.parentId).find("input");debug.log("$Brid.Html.CheckboxElement.Checkbox.areAllSelected()","Ima ih ukupno:",e,"Chekiranih:",t),e>t&&this.deselect(i),t==e&&this.select(i)},isAnySelected:function(){return debug.log("$Brid.Html.CheckboxElement.Checkbox.isAnySelected()"),jQuery("input[id*="+this.id+"]").hasClass("checked")?!0:!1},togglePostButton:function(e){jQuery("#postVideo").length>0&&(e?jQuery("#postVideo").removeClass("disabled"):jQuery("#postVideo").addClass("disabled")),jQuery("#postPlaylist").length>0&&(e?jQuery("#postPlaylist").removeClass("disabled"):jQuery("#postPlaylist").addClass("disabled"))},toggleTopMenu:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.showToolbar()");var e=jQuery(".toolbarItem");debug.log("$Brid.Html.CheckboxElement.Checkbox.showToolbar()",e),this.isAnySelected()?e.show():e.hide()},toggleVideoField:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleVideoField()",e);var t=jQuery(e).attr("id"),i=t.replace("On","");jQuery(e).hasClass("checked")?(jQuery("#Video"+i).parent().fadeIn(),jQuery(".invisibleDiv").fadeIn()):jQuery(".invisibleDiv").fadeOut()},toggleAdSettings:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleAdSettings()",e);try{debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleAdSettings()","Try to toggle save object")}catch(t){}var i=function(){jQuery("#adSettings").animate({height:"toggle"},600,function(){})};jQuery("#adSettings0").length>0?jQuery("#adSettings0").fadeToggle(100,function(){i()}):i()},toggleVoipSocialOptions:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleVoipSocialOptions()",e),1!=jQuery(e).val()?(jQuery("#voipSocialOption").next().addClass("disabledCheckbox"),jQuery("#checkbox-makeFamily").addClass("disabledCheckbox"),jQuery("#checkbox-makeFamily").parent().addClass("disabledCheckbox"),jQuery("#checkbox-veepsChat").addClass("disabledCheckbox"),jQuery("#checkbox-veepsChat").parent().addClass("disabledCheckbox"),jQuery("#checkbox-veepsType").addClass("disabledCheckbox"),jQuery("#checkbox-veepsType").parent().addClass("disabledCheckbox"),jQuery("#checkbox-veepsInit").addClass("disabledCheckbox"),jQuery("#checkbox-veepsInit").parent().addClass("disabledCheckbox")):(jQuery("#voipSocialOption").next().removeClass("disabledCheckbox"),jQuery("#checkbox-makeFamily").removeClass("disabledCheckbox"),jQuery("#checkbox-makeFamily").parent().removeClass("disabledCheckbox"),jQuery("#checkbox-veepsChat").removeClass("disabledCheckbox"),jQuery("#checkbox-veepsChat").parent().removeClass("disabledCheckbox"),jQuery("#checkbox-veepsType").removeClass("disabledCheckbox"),jQuery("#checkbox-veepsType").parent().removeClass("disabledCheckbox"),this.toggleVeepsChatNextToPlayer(jQuery("#veepsType")))},toggleVeepsChatNextToPlayer:function(e){debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleVeepsChatNextToPlayer()",e),1!=jQuery(e).val()?(jQuery("#checkbox-veepsInit").addClass("disabledCheckbox"),jQuery("#checkbox-veepsInit").parent().addClass("disabledCheckbox")):(jQuery("#checkbox-veepsInit").removeClass("disabledCheckbox"),jQuery("#checkbox-veepsInit").parent().removeClass("disabledCheckbox"))},selectProperty:function(e){if(debug.log("$Brid.Html.CheckboxElement.Checkbox.selectProperty()",e),void 0==e.property)throw ArgumentException('"property" property in argument is missing e.g {property : property, status : status}');if(void 0==e.status)throw ArgumentException('"status" property in argument is missing e.g {property : property, status : status}');this.deselectAll();var t=cntNotSelected=0;jQuery("input[id*="+this.id+"]").each(function(){var i=jQuery(this).attr("data-value"),r=jQuery("#partner-options-"+i).parent().find("."+e.property);if(void 0!=r[0]&&jQuery(r[0]).attr("data-value")==e.status){debug.log("property",r);var s=jQuery("#tableRow"+i).find(".checkbox").hasClass("disabledCheckbox");debug.log("Checkbox is disabled?",s,this.id),0==s&&(jQuery("#"+this.id).css("background-image","url("+$BridWordpressConfig.pluginUrl+"/img/checkbox_all.jpg)"),jQuery("#"+this.id).prop("checked",!0).addClass("checked").prev().show(),t++)}else cntNotSelected++}),t>0&&0==cntNotSelected?(this.checkSelectAll(),this.togglePostButton(!0)):this.togglePostButton(!1),jQuery(".toolbarItem").fadeIn()},Published:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Published()"),this.selectProperty({property:"video-status",status:1})},Pending:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Pending()"),this.selectProperty({property:"video-status",status:7})},None:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.None()"),this.deselectAll()},Paused:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Paused()"),this.selectProperty({property:"video-status",status:0})},Failed:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Failed()"),this.selectProperty({property:"video-status",status:5})},Monetized:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Monetized()"),this.selectProperty({property:"video-monetize",status:1})},NotMonetized:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.NotMonetized()"),this.selectProperty({property:"video-monetize",status:0})},Verified:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Verified()"),this.deselectAll(),this.selectProperty({property:"video-verified",status:1}),this.toggleTopMenu()},NotVerified:function(){debug.log("$Brid.Html.CheckboxElement.Checkbox.Verified()"),this.deselectAll(),this.selectProperty({property:"video-verified",status:0}),this.toggleTopMenu()},submitForm:function(e){var t=jQuery(e).closest("form"),i=jQuery(e).attr("id");if(debug.log("iddd",jQuery(e).attr("id")),void 0!=t){t.find("[id="+i+"Button]").click()}},enableSubmit:function(){debug.log("$Brid.Html.Form.enableSubmit()");var e=jQuery("#UserUsername").val(),t=jQuery("#UserPassword").val(),i=jQuery("#UserTermsConfirmed").val(),r=jQuery("#recaptcha_response_field").val(),s=1;"text"==jQuery("#UserPassword").attr("type")&&(s=.3),t.length>0?jQuery("#showHidePass").css("opacity",s):jQuery("#showHidePass").css("opacity",0),jQuery("#registerButton").button(""!=e&&$Brid.Util.isEmailValid(e)&&""!=t&&t.length>6&&t.length<50&&1==i&&r.length>1?{disabled:!1}:{disabled:!0})},changeAspectRatio:function(){parseInt(jQuery("#keepOriginalRatio").val())&&$Brid.Util.calculateAspectRatio()}},create:function(e){return debug.log("$Brid.Html.CheckboxElement.create",e),this.Checkbox.init(e)}};$Brid.Html.CheckboxElement=jQuery.extend(!0,{},CheckboxElement);var Selectbox={init:function(){debug.log("$Brid.Html.Selectbox.init()","Init custom selectboxes."),jQuery(".selectbox").off("click",this.clickSelectbox).on("click",this.clickSelectbox),jQuery(".selectBoxActive").off("click",this.clickSelectboxName).on("click",this.clickSelectboxName),jQuery(".selectBoxActiveImgDiv").off("click",this.clickSelectboxName).on("click",this.clickSelectboxName),this.initTopChosen()},initTopChosen:function(){debug.log("$Brid.Html.Selectbox.initTopChosen()","Init chosen Top selectboxes."),jQuery(".chzn-select").chosen()},clickSelectbox:function(e){debug.log("$Brid.Html.Selectbox.clickSelectbox","Event");var t=jQuery(e.target).hasClass("selectbox")?jQuery(e.target):jQuery(e.target).parent();if(debug.log(t),t.hasClass("selectbox")){debug.log("click item",t);var i=jQuery(this).parent().parent().parent(),r=jQuery(i).find(".selectBoxActive"),s=jQuery(i).find(".ul-selectbox"),o=i.find(":input");o.val(t.attr("data-value")),void 0!=o.attr("onchange")&&$Brid.Util.executeCallback(callbacks,o.attr("onchange"),o),jQuery(s).find("li").each(function(){jQuery(this).removeClass("selected_selectbox")}),r.html(t.text()),s.fadeOut(150),t.addClass("selected_selectbox")}},clickSelectboxName:function(){debug.log("$Brid.Html.Selectbox.clickSelectboxName","Event");var e=jQuery(this).parent().find(".ul-selectbox");jQuery(".selectBoxContent").find(".ul-selectbox").not(e).hide(),jQuery(e).is(":visible")?(jQuery(e).hide(),jQuery(document).unbind("click",$Brid.Html.Selectbox.closeSelectboxes)):(jQuery(e).fadeIn(),jQuery(document).bind("click",$Brid.Html.Selectbox.closeSelectboxes))},closeSelectboxes:function(e){debug.log("$Brid.Html.Selectbox.closeSelectboxes","Event");var t=!1;jQuery("selectBoxActive,selectbox,selectBoxActiveImg,selectBoxActiveImgDiv".split(",")).each(function(i,r){return jQuery(e.target).hasClass(r)?(t=!0,!1):void 0}),t||(jQuery(".selectBoxContent").find(".ul-selectbox").hide(),jQuery(document).unbind("click",$Brid.Html.Selectbox.closeSelectboxes))}};$Brid.Html.Selectbox=jQuery.extend(!0,{},Selectbox);var FlashMessage={ajaxMsgHeight:30,delay:5e3,loading:function(e){debug.log("$Brid.Html.FlashMessage.loading()",e);var t=jQuery("#ajaxFlashMessage");t.parent().css({height:this.ajaxMsgHeight+"px",width:"100%"}),t.css({height:this.ajaxMsgHeight+"px",width:"100%"}),t.removeClass("success error").addClass("loading").html(e).fadeIn(500)},show:function(e){if(debug.log("$Brid.Html.FlashMessage.show()",e),"object"!=typeof e)throw new ArgumentException('Argument must be typeof object. Try this format: show({msg : "text"}');if(void 0==e.msg)throw new ArgumentException('Argument property "msg" is missing.  Try this format: show({msg : "text"}');var t=(jQuery("#ajaxFlashMessage").text(),jQuery("#ajaxFlashMessage")),i=$Brid.Html.FlashMessage.delay;if(debug.log("msgBox.parent()",t.parent(),"ajaxMsgHeight",this.ajaxMsgHeight),void 0==e.status)throw new ArgumentException('Argument property "status" is missing.  Try this format: show({msg : "message" , stauts : true}',e);"success"==e.status||1==e.status?(t.parent().css({height:this.ajaxMsgHeight+"px",width:"100%"}),t.css("width","100%"),t.removeClass("loading error").addClass("success").html(e.msg).css("height",this.ajaxMsgHeight+"px").fadeIn().delay(i).fadeOut(300,$Brid.Html.FlashMessage.hide)):(t.parent().css({height:this.ajaxMsgHeight+"px",width:"100%"}),t.css("width","100%"),t.removeClass("loading success").addClass("error").html(e.msg).css("height",this.ajaxMsgHeight+"px").fadeIn("fast").delay(i).fadeOut(300,$Brid.Html.FlashMessage.hide))},hide:function(){debug.log("$Brid.Html.FlashMessage.hide()","Hiding message...");var e=jQuery("#ajaxFlashMessage");e.fadeOut("fast",function(){e.parent().css({height:"0px",width:"0px"}),e.css({height:"0px",width:"0px"})}),$Brid.Html.Sticky.doWeNeedToMoveAnyElement("minus")},check:function(){debug.log("$Brid.Html.FlashMessage.check()","Check message Hiding message...")}};$Brid.Html.FlashMessage=jQuery.extend(!0,{},FlashMessage);var GoogleCheckbox={init:function(){debug.log("$Brid.Html.GoogleCheckbox.init()","Init google checkbox menu.");var e=jQuery(".google_button"),t=jQuery("#g_menu");e.off("click",this.toggleCheckboxMenu).on("click",this.toggleCheckboxMenu),t.off("click",this.executeChecboxAction).on("click",this.executeChecboxAction)},toggleGMenu:function(e){debug.log("$Brid.Html.GoogleCheckbox.toggleGMenu()","Clicked on ID:",jQuery(this).attr("id"),"Event",jQuery(e.target));var t=jQuery(this).parent().find(".gdrop_down");if($Brid.Html.GoogleCheckbox.hideAllGMenus(jQuery(this),t),t.is(":visible")){var i=jQuery(e.target).attr("data-method");debug.log("$Brid.Html.GoogleCheckbox.toggleGMenu()","Method:",i),$Brid.Util.executeCallback($Brid.Callbacks,i,jQuery(e.target)),t.hide(0,function(){jQuery(document).unbind("click",$Brid.Html.GoogleCheckbox.hideAllGMenus)})}else debug.log("$Brid.Html.GoogleCheckbox.toggleGMenu()","Show G menu"),t.fadeIn(300,function(){jQuery(document).bind("click",$Brid.Html.GoogleCheckbox.hideAllGMenus),$Brid.Util.isMobileDevice("ios")&&jQuery(document).bind("touchstart",function(e){"chkbox_action"!=jQuery(e.target).attr("class")&&$Brid.Html.GoogleCheckbox.hideAllGMenus()})})},executeChecboxAction:function(e){var t=jQuery(this).attr("data-checkbox-id"),i=jQuery("#"+t).attr("data-name"),r=jQuery(e.target).attr("data-method");debug.log("Checkbox callback method on click:",r,"Name:",i,"Checkbox id:",t);var s=$Brid.Html.CheckboxElement.create({name:i,targetElement:e.target});$Brid.Util.executeCallback(s,r)},toggleCheckboxMenu:function(e){debug.log("$Brid.Html.GoogleCheckbox.toggleCheckboxMenu()","Toggle Checkbox Menu",e,jQuery(this));var t=jQuery(this).parent().find(".gdrop_down");$Brid.Html.GoogleCheckbox.hideAllGMenus(e,t),t.is(":visible")?t.hide(0,function(){jQuery(document).unbind("click",$Brid.Html.GoogleCheckbox.hideAllGMenus)}):t.fadeIn(300,function(){jQuery(document).bind("click",$Brid.Html.GoogleCheckbox.hideAllGMenus)})},hideGMenu:function(e){var t=jQuery(e.target).find(".gdrop_down");jQuery(t).hide(function(){jQuery(document).unbind("click",$Brid.Html.GoogleCheckbox.hideAllGMenus)})},hideAllGMenus:function(e,t){var i=jQuery(e).attr("id");debug.log("$Brid.Html.GoogleCheckbox.hideAllGMenus()"," First hide all other opened G menus","id:"+i),void 0!=i?jQuery(".gdrop_down").each(function(){void 0!=t?jQuery(this).parent().attr("id")!=i&&jQuery(this).attr("id")!=t.attr("id")&&jQuery(this).hide():jQuery(this).parent().attr("id")!=i&&jQuery(this).hide()}):void 0!=t?i!=t.attr("id")&&jQuery(".gdrop_down").each(function(){jQuery(this).attr("id")!=t.attr("id")&&jQuery(this).hide()}):jQuery(".gdrop_down").hide(),jQuery(document).unbind("click",$Brid.Html.GoogleCheckbox.hideAllGMenus)}};$Brid.Html.GoogleCheckbox=jQuery.extend(!0,{},GoogleCheckbox);var Search={delay:900,config:{},init:function(e){if(debug.log("$Brid.Html.Search.init()",e),void 0==e.className)throw new ArgumentException('Argument "className" must sent as obj.argument. E.g {className : ".inputSearch"}');if(void 0==e.model)throw new ArgumentException('Argument "model" must sent as obj.argument. E.g {model : "Partner"}');void 0==e.controller&&(e.controller=e.model.toLowerCase()+"s"),void 0==e.form&&(e.form=e.model+"IndexForm"),void 0==e.button&&(e.button="button-search-"+e.model),e.loadingMsg="",void 0==e.into&&(e.into=".bp_list_items");var t=jQuery("#"+e.form).attr("data-loadIntoDivClass");void 0!=t&&(e.into="."+t),void 0!=e.putContentIntoDivClass&&(e.into="."+e.putContentIntoDivClass),e.callback={after:{name:"searchLoaded",element:{arguments:e}}},this.config=jQuery.extend(!1,{},e),debug.log("Search config: ",this.config),$Brid.stopTimeout("Search.search"),jQuery("#"+e.button).off("click.Search",this.click).on("click.Search",this.click),jQuery(".inputSearch").off("keyup.Search",this.keyup).on("keyup.Search",this.keyup),jQuery(".inputSearch").off("keydown.Search",this.keydown).on("keydown.Search",this.keydown),jQuery(".inputSearch").off("keypress.Search",this.keypress).on("keypress.Search",this.keypress)},doSearch:function(){var e=$Brid.Html.Search.config.model+"s",t=$Brid.Html.Search.config.model,i=jQuery("#"+e+"-content");$Brid.Html.Search.config.objInto&&(i=jQuery($Brid.Html.Search.config.objInto)),e=e.toLowerCase(),void 0!=$Brid.Html.Search.config.action&&(e=$Brid.Html.Search.config.action);var r={name:"insertContent",obj:i};void 0!=$Brid.Html.Search.config.after&&(r=$Brid.Html.Search.config.after);var s={action:e,search:jQuery("#"+t+"Search").val()};"undefined"!=typeof $Brid.Html.Search.config.objInto&&(i=jQuery($Brid.Html.Search.config.objInto)),void 0!=$Brid.Html.Search.config.view&&(s.view=$Brid.Html.Search.config.view),"undefined"!=typeof $Brid.Html.Search.config.mode&&(s.mode=$Brid.Html.Search.config.mode),"undefined"!=typeof $Brid.Html.Search.config.subaction&&(s.subaction=$Brid.Html.Search.config.subaction),"undefined"!=typeof $Brid.Html.Search.config.playlistType&&(s.playlistType=$Brid.Html.Search.config.playlistType),"undefined"!=typeof $Brid.Html.Search.config.buttons&&(s.buttons=$Brid.Html.Search.config.buttons),$Brid.Api.call({data:s,callback:{after:r}})},click:function(){debug.log("Click search button: "),$Brid.stopTimeout("Search.search"),$Brid.Html.Search.doSearch()},keyup:function(e){debug.log("$Brid.Html.Search.keyup()","Event",e),e.preventDefault(),$Brid.stopTimeout("Search.search"),13!=e.which&&($Brid.timeout["Search.search"]=setTimeout(function(){debug.log("AUTO CALL Search on TIMEOUT: ",$Brid.Html.Search.config),$Brid.stopTimeout("Search.search"),$Brid.Html.Search.doSearch()
},$Brid.Html.Search.delay))},keydown:function(e){debug.log("$Brid.Html.Search.keydown()","Event",e),$Brid.stopTimeout("Search.search")},keypress:function(e){debug.log("$Brid.Html.Search.keypress()","Event",e.which),13==e.which&&($Brid.stopTimeout("Search.search"),e.preventDefault(),$Brid.Html.Search.doSearch())}};$Brid.Html.Search=jQuery.extend(!0,{},Search);var Radio={init:function(){debug.log("$Brid.Html.Radio.init()","Init custom radio buttons."),jQuery(".options").off("click",this.click).on("click",this.click)},click:function(e){var t=jQuery(e.target).hasClass("option")?jQuery(e.target):jQuery(e.target).parent();if(t.hasClass("option")&&!t.parent().hasClass("disabledCheckbox")){var i=jQuery(this).find(":input");i.val(t.attr("data-value")),jQuery(this).find(".ul-opitons li").find(".option_selected").hide(),jQuery(t).find(".option_selected").fadeIn(200),$Brid.Util.executeCallback($Brid.Callbacks,i.attr("data-method"),i)}}};$Brid.Html.Radio=jQuery.extend(!0,{},Radio);var QuickLibrary={init:function(){jQuery(".media-brid-action").on("click",function(){var e=jQuery(this).attr("data-action");$Brid.Api.call({data:{action:"quickLibrary",file:e},callback:{after:function(t){jQuery("#bridSpin").hide(),jQuery("#bridLibraryContent").html(t),$Brid.Html.QuickLibrary.init(),"video_library"==e?$Brid.Html.PostVideo.init():$Brid.Html.PostPlaylist.init()},before:function(){jQuery("#bridSpin").show()}}})})}};$Brid.Html.QuickLibrary=jQuery.extend(!0,{},QuickLibrary);var PostVideo={init:function(){jQuery(".media-router").children().off("click",$Brid.Html.PostVideo.onTabClick).on("click",$Brid.Html.PostVideo.onTabClick)},onTabClick:function(){try{jQuery(document).unbind("cbox_cleanup")}catch(e){debug.error("Erro on unbind cbox_cleanup")}jQuery("#updateBridItem").css("display","none");var t=jQuery(this).attr("data-id"),i=jQuery(this);$Brid.Html.PostVideo.callAjax(t,i)},callAjax:function(e,t){$Brid.Api.call({data:{action:e},callback:{after:function(i){jQuery("#bridSpin").hide(),jQuery(".media-router").children().removeClass("active"),t.addClass("active"),jQuery("#brid-content").html(i),("addVideoPost"==e||"videoLibraryPost"==e)&&(debug.log("ACTION",e),jQuery("#videoSaveAdd").css("display","block")),"videoLibraryPost"==e&&jQuery("#updateBridItem").css("display","block")},before:function(){jQuery("#bridSpin").show()}}})}};$Brid.Html.PostVideo=jQuery.extend(!0,{},PostVideo);var PostPlaylist={init:function(){jQuery(".media-router").children().off("click",$Brid.Html.PostPlaylist.onTabClick).on("click",$Brid.Html.PostPlaylist.onTabClick)},onTabClick:function(){try{jQuery(document).unbind("cbox_cleanup")}catch(e){debug.error("Erro on unbind cbox_cleanup")}var t=jQuery(this).attr("data-id"),i=jQuery(this).attr("data-playlistType"),r=jQuery(this);selectedVideos=new Array;var s={action:t};void 0!=i&&(s.playlistType=i),jQuery("#updateBridItem").css("display","none"),$Brid.Api.call({data:s,callback:{after:function(e){jQuery("#bridSpin").hide(),jQuery(".media-router").children().removeClass("active"),r.addClass("active"),jQuery("#brid-content").html(e),("addPlaylistPost"==t||"playlistLibraryPost"==t)&&(debug.log("ACTION",t),jQuery("#videoSaveAdd").css("display","block"),"playlistLibraryPost"==t?(jQuery("#bridSelected").addClass("empty"),jQuery("#updateBridItem").css("display","block")):(jQuery("#bridSelected").removeClass("empty"),jQuery("#updateBridItem").css("display","none")))},before:function(){jQuery("#bridSpin").show()}}})}};$Brid.Html.PostPlaylist=jQuery.extend(!0,{},PostPlaylist);var Util={allowedStreamingExtensions:["f4m","smil","m3u8"],allowedIntroUrlExtensions:["mp4","webm"],decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},shortCode:function(e,t,i,r){v=jQuery(".wp-editor-area").val();var s="";i||(i="No title"),void 0==r&&(r="video"),s+="[brid "+r+'="'+e+'" player="'+t+'" title="'+i.replace(/[^a-zA-Z0-9 -()._]/g,"")+'"]',"undefined"!=e&&$Brid.Util.addToPost(s)},addToPost:function(e){if(debug.log("$Brid.Util.addToPost()",e),jQuery(".wp-editor-area").is(":visible")){debug.log("$Brid.Util.addToPost()","isvisible",e);var t=jQuery(".wp-editor-area").prop("selectionStart"),i=jQuery(".wp-editor-area").val(),r=i.substring(0,t),s=i.substring(t,i.length);jQuery("#content").val(r+e+s)}else{debug.log("$Brid.Util.addToPost()","mceInsertContent",e);{tinyMCE.activeEditor.getContent()}tinyMCE.activeEditor.execCommand("mceInsertContent",!1,e);try{initBridEmbedConvert()}catch(o){debug.error("initBridEmbedConvert",o.message)}}killVeeps()},getRedirectUrl:function(e){debug.log("$Brid.Util.getRedirectUrl()");var t={action:"videos"},i=new RegExp("/videos/edit/[0-9]","i");switch(i.test(e)&&(t.action="editVideo",t.id=e.replace("/videos/edit/","")),e){case"/playlists/index/":t.action="playlists"}return debug.log("$Brid.Util.getRedirectUrl()","return:",t),t},executeCallback:function(e,t,i){try{void 0!=t?(debug.log("$Brid.Util.executeCallback()","Object: "+e.className+" on click call: "+e.className+"."+t+"(); Args:",i,"Object:",e),void 0!=i?e[t].apply(e,[i]):e[t].apply(e)):debug.log("Callback method ("+e.className+"."+t+'()) is undefined. Add function "method" attribute of the HTML element and define your method "'+t+'" in "'+e.name+'" Object. Method will receive input element as argument.',e)}catch(r){r instanceof TypeError?debug.log('Check is there callback method "'+t+'" defined in object "'+e.className+'". Called undefined Function: '+e.className+"."+t+"();",r.message,r.stack):debug.error("$Brid.Util.executeCallback()","Object call: "+e.className+"."+t+"();",r.message,{stack:r.stack})}},ucfirst:function(e){return debug.log("$Brid.Util.ucfirst()"),e.charAt(0).toUpperCase()+e.slice(1)},makeid:function(e){return debug.log("$Brid.Util.makeid()"),void 0==e&&(e=5),Math.random().toString(36).substr(2,e)},center:function(e,t){debug.log("$Brid.Util.center()"),jQuery(e).css({position:"absolute",left:(jQuery(t).width()-jQuery(e).outerWidth())/2,top:(jQuery(t).height()-jQuery(e).outerHeight())/2})},isMobileDevice:function(e){return debug.log("$Brid.Util.isMobileDevice()",e),"undefined"==typeof e?jQuery.browser.mobile:"ios"==e?navigator.userAgent.match(/iPhone|iPad|iPod/i):jQuery.browser.mobile},isEmailValid:function(e){debug.log("$Brid.Util.isEmailValid()",e);var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return t.test(e)},isFileUrl:function(e){debug.error("$Brid.Util.isFileUrl() Possible redudant method @see $Brid.Util.isUrl VS $Brid.Util.isFileUrl",e);var t=new RegExp("(http|ftp|https)://[a-z0-9-_]+(.[a-z0-9-_]+)+(.[a-z]{2,4})+/[a-z0-9-_/]+(.[a-z]{2,4})","i");return t.test(e)},isUrl:function(e){debug.log("$Brid.Util.isUrl()",e);var t=new RegExp("(http|https|ftp|rtmp)://(www.)?([a-z0-9-_.])+.([a-z]{2,6})/(.)*","i");return debug.log("$Brid.Util.isUrl()",t.test(e)),t.test(e)},checkExtension:function(e,t){if(debug.log("$Brid.Util.checkExtension()",e,t),void 0==t)throw new ArgumentException('"allowedExtensions" second argument is missing.');var i=e.substr(e.lastIndexOf(".")+1,4);return i=i.replace("?","").replace("#",""),jQuery.inArray(i.toLowerCase(),t)>-1?!0:(debug.log("$Brid.Util.isFileUrl()","Bad extension: ",i),!1)},onlyNumbers:function(e){return(e.which<48||e.which>57)&&37!=e.which&&8!=e.which&&0!=e.which?(debug.log(e.which),!1):void 0},clickUrl:function(){void 0!=jQuery(this).attr("data-target")?window.open(jQuery(this).attr("data-href")):window.location=jQuery(this).attr("data-href")},openDialog:function(e,t){debug.log("$Brid.Util.openDialog",e);var i="";void 0!=t&&(i+="<h2>"+t+"</h2>"),i+="<p>"+e+"</p>",modal.open({content:i})},isUrlString:function(e){debug.log("$Brid.Util.isUrlString()",e);var t=/^((https?|ftp|rtmp):\/\/|(www|ftp)\.)[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+([/?].*)?$/;return e.match(t)},isYoutubeUrl:function(e){debug.log("$Brid.Util.isYoutubeUrl()",e);var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return e.match(t)},isStreamingUrl:function(e){return debug.log("$Brid.Util.isStreamingUrl()",e,this.allowedStreamingExtensions),$Brid.Util.checkExtension(e,this.allowedStreamingExtensions)||$Brid.Util.isUrl(e)&&null!=e.match(/^rtmp:\/\//)}};$Brid.Util=jQuery.extend(!0,{},Util);var Uploader={script_path:"/videos/",filename:null,oldfile:null,filesize:0,start_counter:0,maxStartNumber:15,sid:"",s3uploads:!1,uploadForm:null,action:"",uploadButton:null,uploadMsg:"",upload:null,uploadLimit:"100MB",uploadFriendlyLimit:"100MB",s3uploads:!1,canceled:!1,errorRetrieve:0,emptyResponseRetrieve:0,uploadInputTemplate:'<input name="userfile" id="userfile" type="file"/>',extension:"",allowedExtensions:"mp4,mov,qt,flv,f4v,wmv,asf,mpg,vob,m2v,mp2,m4v,avi,webm,ogv,ogg,mxf,mts,mkv,r3d,rm,flac,mj2,mpeg",Progress:{element:null,start:'<div id="prog_c1" style="display:none;"><div id="uploadStatus">Starting upload...</div></div>'},wpMode:"",Exception:function(e){this.name="UploadException",this.message=e,this.stack=(new Error).stack,$_this=this},convertSize:function(e){var t=parseInt(e.replace("MB",""));return 1e3*t*1e3},convertSizeFriendly:function(e){var t=parseInt(e.replace("MB",""));return t>=1e3?parseInt(t/1e3)+"GB":1e3>t?t+"MB":e},init:function(e){if(jQuery("#upload").length>0){void 0!=uploadUrl&&-1==this.script_path.indexOf(uploadUrl)&&(this.script_path=uploadUrl+this.script_path),Uploader.Exception.prototype=new Error;var t=null!=e&&void 0!=e.uploadLimit?e.uploadLimit:this.uploadLimit;null!=e.mode&&void 0!=e.mode&&(this.wpMode=e.mode),debug.log("$Brid.Uploader.init()","Initialize Uploader Object."),this.uploadLimit=this.convertSize(t),this.uploadFriendlyLimit=this.convertSizeFriendly(t),this.uploadForm=jQuery("#upload"),this.uploadForm.attr("action","https://upload.encoding.com/upload"),this.action=this.uploadForm.attr("action"),this.Progress.element=jQuery("#progress"),this.uploadButton=jQuery("#userfileButton"),this.uploadMsg=jQuery("#uploadMsg"),jQuery("#uploadInputHide").html(this.uploadInputTemplate).css({height:"280px"}),this.upload=jQuery("#userfile"),this.uploadCloseBtn=jQuery("#uploadCloseBtn");var i=this;i.resetFields(),i.uploadCloseBtn.off("click.Upload"),i.uploadCloseBtn.on("click.Upload",function(){debug.log("$Brid.Uploader.init()","uploadCloseBtn CLick"),i.cancel()}),i.upload.off("change.Upload"),i.upload.on("change.Upload",i.filechange),jQuery("#uploadInputHide").hover(function(){jQuery("#userfileButton").addClass("userfileButtonHover")},function(){jQuery("#userfileButton").removeClass("userfileButtonHover")})}else debug.log("Calling Brid.Uploader.init() and there is no upload form available on this page.")},getInstance:function(){return this},resetFields:function(){jQuery("#uid").val(""),jQuery("#sid").val(""),jQuery("#bridTimestamp").val(""),jQuery("#signature").val(""),jQuery("#progress").html("")},getFileName:function(){var e=this.upload.val();return 1==e.indexOf(":\\")&&(e=e.split(":").pop().split("\\").pop()),e},errorCallback:function(e){try{throw debug.error("$Brid.Uploader.errorCallback()",e),new Uploader.Exception(e)}catch(t){debug.error(t),$Brid.Util.openDialog(t.message,"Upload error, please reupload."),jQuery("#progress").html(),jQuery("#userfileButton").show(),$Brid.init(["Html.Uploader"])}},filechange:function(e){try{debug.group("UPLOADER"),debug.log("$Brid.Uploader.filechange()",e,this.files);var t=$Brid.Html.Uploader.getInstance();if(t.oldfile=this.filename,t.filename=t.getFileName(),t.extension=t.filename.split(".").pop().toLowerCase(),t.fileSize=this.files[0].size,-1==jQuery.inArray(t.extension,t.allowedExtensions.split(",")))throw new Uploader.Exception("File selected is not has not valid extension.<br/>Supported extensions are:<br/>"+t.allowedExtensions);if(void 0!=this.files[0]&&this.files[0].size>t.uploadLimit)throw new Uploader.Exception("Maximum upload filesize limit is "+t.uploadLimitFriendly+".");if(""==t.filename)throw new Uploader.Exception("Please select a file first.");if(t.upload.val()==t.oldfile||""==t.upload.val())throw new Uploader.Exception("File selected is same as old file. Please select a different file to upload.");jQuery("#VideoUploadInProgress").val(1),jQuery.ajax({url:t.script_path+"signer/.json",type:"GET"}).done(function(e){"object"==typeof e&&void 0!=e.sid?(debug.log("$Brid.Uploader.filechange()","response",e),jQuery("#sid").val(e.sid),jQuery("#uid").val(e.uid),jQuery("#bridTimestamp").val(e.timestamp),jQuery("#signature").val(e.signature),t.sid=e.sid,t.uploadForm.attr("action",t.action+"?X-Progress-ID="+e.sid),window.onbeforeunload=function(){return"YOUR UPLOAD WILL BE CANCELED IF YOU LEAVE THIS PAGE NOW."},debug.log("$Brid.Uploader.filechange()","Call start"),t.start()):t.errorCallback.call(t,"Response is not an object type")}).fail(function(e,i,r){debug.error("$Brid.Html.Uploader.filechange()","Response failed:",e.responseText,i,"errorThrown:",r),t.failCallback.call(t,e,i,r)})}catch(e){debug.error(e),$Brid.Util.openDialog(e.message,"input error")}},cancel:function(){debug.log("$Brid.Html.Uploader.cancel()"),this.canceled=!0,this.uploadMsg.length>0&&this.uploadMsg.html("Canceling upload...");var e=jQuery("#VideoId").val();if(""!=e){debug.log("Delete video :"+e+" on upload canceled.");var t={controller:"videos",action:"delete",data:"data[Video][ids]="+e};$Brid.Ajax.update(t)}},reset:function(){if(debug.log("$Brid.Html.Uploader.reset()"),jQuery("#VideoUploadInProgress").length>0&&1==jQuery("#VideoUploadInProgress").val()&&($Brid.stopTimeout("Uploader.progress"),jQuery("#VideoUploadInProgress").val(0)),window.onbeforeunload=null,jQuery("#uid").val(""),jQuery("#sid").val(""),jQuery("#bridTimestamp").val(""),jQuery("#signature").val(""),this.Progress.element.html(""),this.uploadMsg.html(""),this.filename=null,this.filesize=0,this.oldfile=null,this.start_counter=15,this.s3uploads=!1,this.canceled=!1,this.extension="","quick"==this.wpMode)$Brid.Html.PostVideo.callAjax("uploadVideoPost",jQuery('<a href="#" data-id="uploadVideoPost" class="media-menu-item">Upload Video</a>'));else{var e="insertContentVideos",t="#Videos-content";$Brid.Api.call({data:{action:"uploadVideo"},callback:{after:{name:e,obj:jQuery(t)}}})}},start:function(){debug.log("$Brid.Uploader.start()");var self=this;jQuery("#uploadButtonDiv").fadeOut(300,function(){jQuery(".fetchWarring").hide(),jQuery("#fetchDiv").hide(),self.Progress.element.html(self.Progress.start),jQuery("#prog_c1").fadeIn(),jQuery("#uploadCloseBtn").fadeIn(),jQuery("#uploadInputHide").css({height:"0px"}),self.uploadMsg.html("PLEASE DO NOT LEAVE THIS PAGE BEFORE UPLOAD IS COMPLETE.").fadeIn(),jQuery(".form-table").fadeIn(),jQuery("#postUploadQuick").fadeIn()}),self.uploadForm.submit(),jQuery.ajax({url:self.script_path+"progress/"+self.sid,type:"GET"}).done(function(data){var resp=eval("("+data+")");"object"==typeof resp&&"error"!=resp.state?(jQuery("#VideoProgressSignature").val(self.sid),debug.log("$Brid.Uploader.start()","response",resp),debug.log("$Brid.Uploader.start()","Run call"),self.run()):(debug.error("$Brid.Uploader.start()",resp,data),self.errorCallback.call(self,"Response is not an object type. Error:(1)"))}).fail(function(e,t,i){debug.error("$Brid.Html.Uploader.start()","Response failed:",e.responseText,t,"errorThrown:",i),self.failCallback.call(self,e,t,i)})},updateStatus:function(){var e=this,t=0,i=0,r=0,s=jQuery("#userfile").width();if("uploading"==e.response.state){t=e.response.received,i=e.response.size;var r=Math.round(Number(e.response.received)/(Number(e.response.size)/100)),o=s*r/100;if(debug.log("------------FileUploader.callback",t,i,r),jQuery("#prog_c2").length>0){var n=parseInt(jQuery("#prog_c2").width());jQuery("#prog_c2").animate({width:"+="+(o-n)},300,function(){jQuery("#uploadStatus").html(r+"%")})}else jQuery("#uploadStatus").remove(),jQuery("#prog_c1").html('<div id="prog_c2" style="width:0px;display:block;"></div><div id="uploadStatus">0%</div>'),jQuery("#prog_c2").animate({width:"+="+o},400,function(){jQuery("#uploadStatus").html(r+"%")})}"done"==e.response.state&&(""==e.error_message||"undefined"==typeof e.error_message?"100%"!=jQuery("#uploadStatus").html()&&jQuery("#prog_c2").animate({width:s},300,function(){jQuery("#uploadStatus").html("100%")}):e.Progress.element.html("An error occurred: "+e.error_message))},run:function(){debug.log("$Brid.Uploader.run()");var self=this,act=self.s3uploads?"progress/"+self.sid+"/s3uploading/":"progress/"+self.sid,url=self.script_path+act;return self.canceled?(self.reset(),!1):void jQuery.ajax({url:url,type:"GET"}).done(function(resp){if(self.canceled)return self.reset(),!1;if(""==resp&&""==resp.responseText)return void(self.emptyResponseRetrieve>=10&&(self.emptyResponseRetrieve++,debug.log("Response was empty, retry:",self.emptyResponseRetrieve),$Brid.stopTimeout("Uploader.progress"),$Brid.timeout["Uploader.progress"]=setTimeout(function(){self.run.call(self)},2e3)));var response=eval("("+resp+")");switch(self.response=response,void 0!=response.size&&0==self.filesize&&(self.filesize=response.size),"object"!=typeof response&&self.errorCallback.call(self,"Error:(run):Response is not an object."),"undefined"==typeof response.state&&self.errorCallback.call(self,'Error:(run): Response "state" is undefined.'),debug.log("Upload.run",response,response.state),response.state){case"error":if(self.canceled)return self.reset(),!1;self.errorCallback.call(self,"Error:(run), Response returned error status:"+response.status);break;case"starting":self.start_counter++,$Brid.stopTimeout("Uploader.progress"),$Brid.timeout["Uploader.progress"]=setTimeout(function(){self.run.call(self)},2e3),self.start_counter==self.maxStartNumber&&($Brid.stopTimeout("Uploader.progress"),self.start_counter=0,self.errorCallback.call(self,"Error:(run), Start counter reached max 15 start counts."+resp.responseText));break;case"done":self.s3uploads?self.finish():(debug.log("Upload.run enter s3Upload"),self.s3uploads=!0,$Brid.stopTimeout("Uploader.progress"),$Brid.timeout["Uploader.progress"]=setTimeout(function(){self.run.call(self)},2e3));break;default:$Brid.stopTimeout("Uploader.progress"),$Brid.timeout["Uploader.progress"]=setTimeout(function(){self.run.call(self)},2e3)}self.updateStatus.call(self)}).fail(function(e,t,i){debug.error("$Brid.Html.Uploader.run()","Response failed:",e.responseText,t,"errorThrown:",i),self.errorRetrieve<=15?(self.errorRetrieve++,debug.log("Response failed, retry:",self.errorRetrieve),$Brid.stopTimeout("Uploader.progress"),$Brid.timeout["Uploader.progress"]=setTimeout(function(){self.run.call(self)},2e3)):self.failCallback.call(self,e,t,i)})},failCallback:function(e,t,i){if(debug.error("$Brid.Html.Uploader.failCallback()","Response failed:",e.responseText,t,"errorThrown:",i),"object"==typeof e.responseText){var r=jQuery.parseJSON(e.responseText);void 0!=r.message&&$Brid.Html.FlashMessage.show({msg:r.message,status:!1})}},finish:function(){debug.log("$Brid.Uploader.finish()");var self=this;return self.canceled?(self.reset(),!1):void jQuery.ajax({url:self.script_path+"progress/"+self.sid+"/filename/",type:"GET"}).done(function(resp){var response=eval("("+resp+")");self.patch_to_file=response.filename,self.patch_to_minfo=response.mediainfo,self.error_message=response.error,self.s3uploads=!1,(""==response.error||"undefined"==typeof response.error)&&(jQuery("#VideoUploadInProgress").val(0),self.uploadCloseBtn.hide(),jQuery("#VideoOriginalFilename").val(self.patch_to_file),jQuery("#VideoXmlUrl").val(self.patch_to_minfo),jQuery("#VideoUploadSourceUrl").val(self.patch_to_file),jQuery("#VideoOriginalFileSize").val(self.filesize),jQuery("#VideoMp4").val(self.patch_to_file),""==jQuery("#VideoName").val()&&(jQuery("#VideoName").val(self.filename.slice(0,-4)),jQuery("#default-value-VideoName").hide()),jQuery(self.uploadMsg).html("File uploaded successfully."),jQuery("#UploaderForm").delay(3e3).fadeOut(),self.startEncoding(),window.onbeforeunload=null)}).fail(function(e,t,i){debug.error("$Brid.Html.Uploader.finish()","Response failed:",e.responseText,t,"errorThrown:",i),self.failCallback.call(self,e,t,i)})},startEncoding:function(){debug.log("$Brid.Uploader.startEncoding()");var e=jQuery("#VideoId").val(),t=this;if(t.canceled)return t.reset(),!1;if(""==e||jQuery("#videoSaveAdd").hasClass("inprogress"))enableSave(),debug.groupEnd();else{debug.log("$Brid.Uploader.startEncoding()","Start","video id:"+e,t);var i="";i+="&data[Video][upload_source_url]="+t.patch_to_file+"?nocopy",i+="&data[Video][original_file_name]="+t.filename,i+="&data[Video][upload_form]=1",i+="&data[Video][xml_url]="+t.patch_to_minfo,jQuery.ajax({url:t.script_path+"encode/"+e+".json",type:"POST",data:i}).done(function(e){debug.log("---------------Uploader.startEncoding","response",e),enableSave(),debug.groupEnd()}).fail(function(e,i,r){debug.error("$Brid.Html.Uploader.startEncoding()","Response failed:",e.responseText,i,"errorThrown:",r),t.failCallback.call(t,e,i,r)})}}};$Brid.Html.Uploader=jQuery.extend(!0,{},Uploader);var Fetch={checkFetchUrl:function(e){debug.log("$Brid.Fetch.checkFetchUrl()",e);var t=!1,i=$Brid.Html.Uploader.allowedExtensions.split(",");void 0!=e&&"object"!=typeof e&&(t=e),debug.log("$Brid.Fetch.checkFetchUrl()",typeof e,t);var r=jQuery("#goFetchUrl"),s=jQuery("#fetchUrl").val().trim(),o=/^((http|https):\/\/)/;null===s.match(o)&&null===s.match(/^(rtmp:\/\/)/)&&(s="http://"+s);try{if(r.hasClass("inprogress"))throw new ArgumentException("Fething video is in progress!");if(!$Brid.Util.isUrlString(s))throw new ArgumentException("Video url is not valid!");if(!$Brid.Util.isYoutubeUrl(s)&&!$Brid.Util.checkExtension(s,i)&&!$Brid.Util.isStreamingUrl(s))throw new ArgumentException("File selected is not has not valid extension.<br/>Supported extensions are:<br/>"+i);r.hasClass("disabled")&&r.removeClass("disabled")}catch(n){debug.error("$Brid.Html.Form.checkFetchUrl()",n),r.hasClass("disabled")||r.hasClass("inprogress")||r.addClass("disabled"),n instanceof ArgumentException&&t&&$Brid.Util.openDialog(n.message,"Input error")}},fetchUrl:function(){debug.log("$Brid.Fetch.fetchUrl()"),this.checkFetchUrl(!0);var e=jQuery("#goFetchUrl");if(debug.log(e.hasClass("disabled")),!e.hasClass("disabled")&&!e.hasClass("inprogress")){e.addClass("inprogress");var t=jQuery("#fetchUrl").val().trim(),i=/^((http|https):\/\/)/;null===t.match(i)&&null===t.match(/^(rtmp:\/\/)/)&&(t="http://"+t),$Brid.Util.isYoutubeUrl(t)?jQuery.ajax({url:ajaxurl,data:{videoUrl:t,action:"fetchVideo"},type:"POST",beforeSend:function(){$Brid.Html.FlashMessage.loading("In progress...")}}).done(function(t){if($Brid.Html.FlashMessage.show({msg:t.message,status:t.status}),void 0!=t.redirect){var i="insertContentVideos",r="#Videos-content";$Brid.Api.call({data:$Brid.Util.getRedirectUrl(t.redirect),callback:{after:{name:i,obj:jQuery(r)}}})}e.removeClass("inprogress")}).fail(function(e,t,i){var r=jQuery.parseJSON(e.responseText);debug.error("$Brid.Util.fetchUrl()","Response failed:",r,t,"errorThrown:",i);var s=void 0!=r.message?r.message:r.name;(void 0!=s||""!=s)&&$Brid.Html.FlashMessage.show({msg:s,status:!1})}):(jQuery("#UploaderForm").fadeOut(300,function(){jQuery(".fetchWarring").hide(),jQuery(".form-table").fadeIn(300,function(){$Brid.Util.isStreamingUrl(t)&&jQuery("#streamingSnapshot").show()})}),jQuery("#VideoUploadSourceUrl").val(t))}}};$Brid.Fetch=jQuery.extend(!0,{},Fetch);var Video={allowedExtensions:["webm","ogg","vp8","mp4"],allowedVideoExtensions:["webm","ogg","vp8","mp4","flv","mpeg","avi","mk4","mpg","3gp","m4v","mkv","mpe","wmv"],autosave:function(){debug.log("$Brid.Video.autosave()"),jQuery("#videoSaveAdd").hasClass("inprogress")?$Brid.Util.openDialog("Save error","Save already in progress"):(jQuery("#autoSaving").show(),jQuery("#videoSaveAdd").addClass("inprogress"),save.save("VideoAddForm"),jQuery("#VideoAutosave").val(0))},getFfmpegInfo:function(){debug.log("$Brid.Video.getFfmpegInfo()");var e=jQuery("#VideoMp4").val(),t=this;if(jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"),""!=e&&$Brid.Util.isUrl(e)){if($Brid.Util.isStreamingUrl(e))return void this.enableSave();jQuery.ajax({url:ajaxurl,data:"url="+e+"&action=ffmpegInfo",type:"POST",beforeSend:function(){jQuery("#videoSaveAdd,#videoSaveEdit").hasClass("disabled")||jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled")},success:function(e){if(debug.log("Received: ",e),"object"==typeof e&&e.status&&"object"==typeof e.data){var i="",r=e.data;for(var s in r)"VideoCodec"==s&&(i=r[s]),jQuery("#Video"+s).val(r[s]);debug.log(i),jQuery.inArray(i,["h264","webm","vp8"])>-1?(debug.log(this),t.enableSave()):($Brid.Util.openDialog("Invalid codec type:"+i,"Input error"),jQuery("#videoSaveAdd,#videoSaveEdit").hasClass("disabled")||jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"))}}})}},enableSave:function(e){debug.log("$Brid.Video.enableSave()");var t=parseInt(jQuery("#VideoAutosave").val());return amIEncoded?(debug.log("video.js","enableSave ENCODING"),this.checkFieldsEncodedFile(e)?(jQuery("#videoSaveAdd,#videoSaveEdit").removeClass("disabled"),t&&this.autosave(),!0):(jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"),!1)):(debug.log("video.js","enableSave VIDEO URL"),this.checkFields(e)?(jQuery("#videoSaveAdd,#videoSaveEdit").removeClass("disabled"),!0):(jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"),!1))},checkFieldsEncodedFile:function(e){debug.log("$Brid.Video.checkFieldsEncodedFile()");var t=(VideoName=jQuery("#VideoName").val(),jQuery("#VideoImage").val());if(""==VideoName)return void 0!=e&&$Brid.Util.openDialog("Video title is required.","Invalid input"),!1;if(!this.isCategorySelected())return void 0!=e&&$Brid.Util.openDialog("Category is not selected.","Input form error"),!1;if(void 0!=t&&""!=t){if(!$Brid.Util.isUrl(t))return void 0!=e&&$Brid.Util.openDialog("Snapshot Url must be valid URL format.","Invalid input"),!1;if(!$Brid.Util.checkExtension(t,allowedImageExtensions))return void 0!=e&&$Brid.Util.openDialog("Snapshot Url must have valid extension (e.g. "+allowedImageExtensions.join(",")+").","Invalid input"),!1}return!0},checkFields:function(e){debug.log("$Brid.Video.checkFields()",$Brid.Video.allowedExtensions);var t=jQuery("#VideoMp4").val(),i=jQuery("#VideoName").val(),r=jQuery("#VideoImage").val(),s=jQuery("#VideoMp4Hd").val();if(""==i)return void 0!=e&&$Brid.Util.openDialog("Video title is required.","Invalid input"),!1;if(void 0==t||""==t)return void 0!=e&&$Brid.Util.openDialog("Mp4 or WebM Url is required.","Invalid input"),!1;if(!$Brid.Util.isUrl(t))return void 0!=e&&$Brid.Util.openDialog("Mp4 or WebM url must be valid URL format.","Invalid input"),jQuery("#VideoMp4Hd").val(""),jQuery("#default-value-VideoMp4Hd").show(),jQuery("#checkbox-mp4_hd_on").addClass("disabledCheckbox"),!1;if(!$Brid.Util.checkExtension(t,$Brid.Video.allowedExtensions)&&!$Brid.Util.isStreamingUrl(t))return void 0!=e&&$Brid.Util.openDialog("Mp4 or WebM Url must have valid extension (e.g. "+$Brid.Video.allowedExtensions.join(",")+","+$Brid.Util.allowedStreamingExtensions.join(",")+").","Invalid input"),jQuery("#VideoMp4Hd").val(""),jQuery("#default-value-VideoMp4Hd").show(),jQuery("#checkbox-mp4_hd_on").removeClass("disabledCheckbox").addClass("disabledCheckbox"),!1;if(jQuery("#checkbox-mp4_hd_on").removeClass("disabledCheckbox"),void 0!=r&&""!=r){if(!$Brid.Util.isUrl(r))return void 0!=e&&$Brid.Util.openDialog("Snapshot Url must be valid URL format.","Invalid input"),!1;if(!$Brid.Util.checkExtension(r,allowedImageExtensions))return void 0!=e&&$Brid.Util.openDialog("Snapshot Url must have valid extension (e.g. "+allowedImageExtensions.join(",")+").","Invalid input"),!1}if(void 0!=s&&""!=s){if(!$Brid.Util.isUrl(s))return void 0!=e&&$Brid.Util.openDialog("Mp4/WebM HD url must be valid URL format.","Invlid input"),!1;if(!$Brid.Util.checkExtension(s,$Brid.Video.allowedExtensions))return void 0!=e&&$Brid.Util.openDialog("Mp4/WebM HD url Url must have valid extension (e.g. "+$Brid.Video.allowedExtensions.join(",")+").","Invalid input"),!1}return this.isCategorySelected()?!0:(void 0!=e&&$Brid.Util.openDialog("Category is not selected.","Input form error"),!1)},isCategorySelected:function(){debug.log("$Brid.Video.isCategorySelected()"),debug.log("Ind: "+jQuery(".textButtonSmallJs").text().search("Select category")),debug.log('VAL: "'+jQuery(".textButtonSmallJs").text()+'"');var e="";return e="youtube"==defaultTab?jQuery("#add-youtube-channel").find(".textButtonSmallJs").text():"vimeo"==defaultTab?jQuery("#add-vimeo-channel").find(".textButtonSmallJs").text():jQuery(".textButtonSmallJs").text(),debug.log("Ind: "+e.search("Select category")),debug.log('VAL: "'+e+'"'),e.toLowerCase().search("select category")>=0?(debug.log("Category is not selected."),!1):(debug.log('Category selected: "'+jQuery(".textButtonSmallJs").text()+'"'),!0)},checkAutosaveMessage:function(){debug.log("$Brid.Video.checkAutosaveMessage()");var e=jQuery("#autoSaving");e.length&&"Saved"==e.html()&&e.html("Some changes may have not been saved.")}};$Brid.Video=jQuery.extend(!0,{},Video),function(e){var t={init:function(e){return debug.log("DROPDOWN INIT"),this.each(function(){var t=jQuery(this),i=t.data("dropdown");if("undefined"==typeof i){var r={textColor:"#000",arrowImg:'<img alt="Click to open submenu" src="'+$BridWordpressConfig.pluginUrl+'/img/arrow_down.png" width="8" height="4" class="arrowDownJs">'};i=jQuery.extend({},r,e),t.data("dropdown",i)}else i=jQuery.extend({},i,e);var s=t.attr("data-css"),o=t.attr("data-options"),n=[],a=t.attr("data-method"),l=t.attr("data-callback-after");t.addClass("dropdown");var d=jQuery.parseJSON(s),c=jQuery('<div class="textButtonSmallJs" style="opacity: 1;"></div>').css("width",d.width).click($Brid.Html.GoogleCheckbox.toggleGMenu);if(void 0!=o){o=jQuery.parseJSON(o);for(var u in o){var h=jQuery('<div class="chkbox_action">'+o[u].name+"</div>");h.attr(o[u].attr),n.push(h)}}t.find("option").each(function(e,r){jQuery(r).is(":selected")&&c.html(jQuery(r).text()+i.arrowImg),n.push(jQuery('<div class="chkbox_action">'+jQuery(r).text()+"</div>").click(function(){if(jQuery(r).prop("selected",!0),t.val(jQuery(r).val()),void 0!=a)try{$Brid.Util.executeCallback($Brid.Callbacks,a,t)}catch(e){debug.error("Method ("+a+") not defiend inside your $Brid.Callbacks object."+e.message,$Brid.Callbacks)}if(c.html(jQuery(r).text()+i.arrowImg),$Brid.Html.GoogleCheckbox.hideGMenu(t),void 0!=l)try{$Brid.Util.executeCallback($Brid.Callbacks,l,t)}catch(e){debug.error("Method ("+l+") not defiend inside your $Brid.Callbacks object."+e.message,$Brid.Callbacks)}}))});var p=jQuery('<div class="gdrop_down"></div>');void 0!=s&&(s=jQuery.parseJSON(s),p.css(s)),jQuery(n).each(function(e,t){p.append(t)});var f=jQuery(c).add(p),g=jQuery('<div class="dropdown"></div>');t.parent().append(jQuery(g).append(f)),t.hide()})},destroy:function(){return jQuery(this).each(function(){debug.log("Destroy dropdowns");var e=jQuery(this);e.removeData("dropdown");var t=e.next();t.hasClass("dropdown")&&t.remove()})},val:function(){var e=this.eq(0).html();return e}};e.fn.dropdown=function(){var i=arguments[0];if(t[i])i=t[i],arguments=Array.prototype.slice.call(arguments,1);else{if("object"!=typeof i&&i)return e.error("Method "+i+" does not exist on jQuery.dropdown"),this;
i=t.init}return i.apply(this,arguments)}}(jQuery);var modal=function(){var e,t,i,r,s={};return s.center=function(){var e,i;e=Math.max(jQuery(window).height()-t.outerHeight(),0)/2,i=Math.max(jQuery(window).width()-t.outerWidth(),0)/2,t.css({top:e+jQuery(window).scrollTop(),left:i+jQuery(window).scrollLeft()})},s.open=function(r){i.empty().append(r.content),t.css({width:r.width||"auto",height:r.height||"auto"}),s.center(),jQuery(window).bind("resize.modal",s.center),t.show(),e.show()},s.close=function(){t.hide(),e.hide(),i.empty(),jQuery(window).unbind("resize.modal")},e=jQuery('<div id="modalOverlay"></div>'),t=jQuery('<div id="modalBox"></div>'),i=jQuery('<div id="modalContent"></div>'),r=jQuery('<a id="modalClose" href="#">close</a>'),t.hide(),e.hide(),t.append(i,r),jQuery(document).ready(function(){jQuery("body").append(e,t)}),e.click(function(e){e.preventDefault(),s.close()}),r.click(function(e){e.preventDefault(),s.close()}),s}(),getFfmpegInfo=function(){return debug.log("Deprecated call: getFfmpegInfo"),$Brid.Video.getFfmpegInfo()};!function(e,t,i,r){var s=e(t);e.fn.lazyload=function(i){function o(){var t=0;a.each(function(){var i=e(this);if(!l.skip_invisible||i.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else i.trigger("appear"),t=0})}var n,a=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return i&&(r!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),r!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(l,i)),n=l.container===r||l.container===t?s:e(l.container),0===l.event.indexOf("scroll")&&n.bind(l.event,function(){return o()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.one("appear",function(){function r(){}function s(i){i.hide().attr("src",i.data(l.data_attribute))[l.effect](l.effect_speed),t.loaded=!0;var r=e.grep(a,function(e){return!e.loaded});if(a=e(r),l.load){var s=a.length;l.load.call(t,s,l)}}if(!this.loaded){if(l.appear){var o=a.length;l.appear.call(t,o,l)}s(i),""==i.data(l.data_attribute)&&r(i),e(t).error(function(){r(i)})}}),0!==l.event.indexOf("scroll")&&i.bind(l.event,function(){t.loaded||i.trigger("appear")})}),s.bind("resize",function(){o()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&s.bind("pageshow",function(t){t.originalEvent.persisted&&a.each(function(){e(this).trigger("appear")})}),o(),this},e.belowthefold=function(i,o){var n;return n=o.container===r||o.container===t?s.height()+s.scrollTop():e(o.container).offset().top+e(o.container).height(),n<=e(i).offset().top-o.threshold},e.rightoffold=function(i,o){var n;return n=o.container===r||o.container===t?s.width()+s.scrollLeft():e(o.container).offset().left+e(o.container).width(),n<=e(i).offset().left-o.threshold},e.abovethetop=function(i,o){var n;return n=o.container===r||o.container===t?s.scrollTop():e(o.container).offset().top,n>=e(i).offset().top+o.threshold+e(i).height()},e.leftofbegin=function(i,o){var n;return n=o.container===r||o.container===t?s.scrollLeft():e(o.container).offset().left,n>=e(i).offset().left+o.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document);var getYoutube=function(){clearTimeout(typingTimer);var e=jQuery("#VideoYoutubeSearch").val(),t=jQuery("#youtubeContent"),i="AIzaSyAE19zotZ3rQ4cFhMIrXa2mMDsmD9fd7Nw";if(jQuery("#externalServiceLoading").hide(),e.length>2){if(-1!==e.indexOf("youtu.be"))var r=e.replace("https://youtu.be/","");else var r=e.split("v=")[1];if(debug.log("video_id",r),null!=r){var s=r.indexOf("&");e=-1!=s?r.substring(0,s):r;var o="https://www.googleapis.com/youtube/v3/search?q="+escape(e)+"&type=video&key="+i+"&part=snippet&videoEmbeddable=true&maxResults=1&order=relevance"}else var o="https://www.googleapis.com/youtube/v3/search?q="+escape(e)+"&type=video&key="+i+"&part=snippet&videoEmbeddable=true&maxResults=10&order=relevance";jQuery.ajax({url:o,type:"GET",dataType:"json"}).done(function(e){console.log("Youtube data:",e),t.html("");var i=[],r=e.items;jQuery(r).each(function(e,t){i.push({title:t.snippet.title,id:t.id.videoId,image:t.snippet.thumbnails["default"].url,author:t.snippet.channelTitle,service:"Youtube",published:new Date(t.snippet.publishedAt).toPrettyFormat(),providerUrl:"http://www.youtube.com/watch?v=",vevo:t.snippet.channelTitle.indexOf("VEVO")>-1?!0:!1})}),i.length>0?showContent(i):(jQuery("#youtubeContent").html("No videos found."),debug.log("No videos found"))})}else t.html("")};